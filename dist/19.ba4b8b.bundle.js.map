{"version":3,"sources":["webpack:///./views/payment/payment/Deposit.vue?d603","webpack:///./views/payment/payment/Deposit.vue"],"names":["__exports__","store","filter","currentPage","perPage","isFetching","length","selectedItem","selectedAction","searchForm","search","value","newValue","getTransactions","deep","paymentfilter","transactions","getters","keyword","data","page","per_page","type","query","dispatch","then","catch","openModal","action","bootstrap","Modal","document","getElementById","backdrop","show","closeModal","myModal","modalTrigger","querySelector","setAttribute","id","click","total","nextPage","previousPage","pageNumbers","startPage","Math","max","floor","maxVisiblePages","endPage","min","pages","i","push","pageNumber"],"mappings":"29HAGA,MAAMA,G,2BCuUN,MAAMC,EAAQ,cACRC,EAAS,aAAI,GACbC,GAAc,YAAI,GAClBC,GAAU,YAAI,IACdC,GAAa,aAAI,GACjBC,GAAS,YAAI,MACbC,GAAe,YAAI,MACnBC,GAAiB,YAAI,IAErBC,GAAa,YAAI,CACrBC,OAAQ,KAGV,gBACE,IAAMD,GAAWE,MAChBC,IACCC,GAAgBD,EAASF,SAE3B,CAAEI,MAAM,IAOV,gBAAMV,GAAUQ,IACdR,GAAQO,MAAQC,EAChBC,OAGF,MAAME,GAAgB,CAAC,MAAO,UAAW,aAAc,UAEjDC,GAAe,mBAAS,IACrBf,EAAMgB,QAAQ,6BAGjBJ,GAAkB,CAACK,EAAU,MACjCb,GAAWM,OAAQ,EACnB,IAAIQ,EAAO,CACTC,KAAMjB,GAAYQ,MAClBU,SAAUjB,GAAQO,MAClBW,KAAM,UACNC,MAAOL,GAETjB,EACGuB,SAAS,8BAA+BL,GACxCM,KAAK,KACJpB,GAAWM,OAAQ,EACnBL,GAAOK,MAAQK,GAAaL,MAAMQ,KAAKb,SAExCoB,MAAM,KACLrB,GAAWM,OAAQ,KAInBgB,GAAY,CAACR,EAAMS,KACT,IAAIC,UAAUC,MAAMC,SAASC,eAAe,aAAc,CACtEC,SAAU,WAEJC,OAER3B,GAAaI,MAAQQ,EACrBX,GAAeG,MAAQiB,GAEnBO,GAAa,KACjB,IAAIC,EAAUL,SAASC,eAAe,aAClCK,EAAeN,SAASO,cAAc,6BAC1CD,EAAaE,aAAa,iBAAkB,IAAMH,EAAQI,IAC1DH,EAAaI,SAiBTC,GAAQ,mBAAS,IACdzC,EAAMgB,QAAQ,sBAQjB0B,GAAW,KACfxC,GAAYQ,QACZE,MAGI+B,GAAe,KACM,GAArBzC,GAAYQ,QACdR,GAAYQ,QACZE,OAIEgC,GAAc,mBAAS,KAE3B,IAAIC,EAAYC,KAAKC,IACnB7C,GAAYQ,MAAQoC,KAAKE,MAAMC,GAC/B,GAEF,MAAMC,EAAUJ,KAAKK,IAAIN,EALD,GAK+B,EAAGJ,GAAM/B,OAE5DwC,EAAUL,EAAY,EAPF,KAQtBA,EAAYC,KAAKC,IAAIG,EARC,GAQ2B,EAAG,IAGtD,MAAME,EAAQ,GACd,IAAK,IAAIC,EAAIR,EAAWQ,GAAKH,EAASG,IACpCD,EAAME,KAAKD,GAGb,OAAOD,I,OAIT,oBAAU,KACRxC,O,u0MAvCc,CAAC2C,IACfrD,GAAYQ,MAAQ6C,EACpB3C,M,skCAd0B2B,E,iBAC1BvC,EAAMuB,SAAS,iCAAkCgB,GAAIf,KAAK,KACxDU,KACAtB,OAHuB,IAAC2B,I,8NANAA,E,iBAC1BvC,EAAMuB,SAAS,iCAAkCgB,GAAIf,KAAK,KACxDU,KACAtB,OAHuB,IAAC2B,I,sPD5Yb","file":"19.ba4b8b.bundle.js","sourcesContent":["import script from \"./Deposit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Deposit.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <!-- Main Wrapper -->\r\n  <div class=\"main-wrapper\">\r\n    <layout-header></layout-header>\r\n    <layout-sidebar></layout-sidebar>\r\n\r\n    <!-- Notification -->\r\n    <div\r\n      v-if=\"store.state.transaction.error\"\r\n      class=\"alert notify-danger alert-dismissible\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.transaction.error }}</p>\r\n    </div>\r\n    <div\r\n      v-if=\"store.state.transaction.message\"\r\n      class=\"alert notify-success alert-dismissible\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.transaction.message }}</p>\r\n    </div>\r\n    <!-- Notification end -->\r\n\r\n    <!-- Page Wrapper -->\r\n    <div class=\"page-wrapper\">\r\n      <div class=\"content container-fluid\">\r\n        <!-- Page Header -->\r\n        <div class=\"page-header\">\r\n          <div class=\"row align-items-center\">\r\n            <div class=\"col\">\r\n              <h3 class=\"page-title\">Deposits</h3>\r\n              <ul class=\"breadcrumb\">\r\n                <li class=\"breadcrumb-item\">\r\n                  <router-link to=\"/\">Dashboard</router-link>\r\n                </li>\r\n                <li class=\"breadcrumb-item active\">Deposits</li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"col-auto\">\r\n              <!-- <router-link to=\"/add-payments\" class=\"btn btn-primary me-2\">\r\n                <i class=\"fas fa-plus\"></i>\r\n              </router-link> -->\r\n              <!-- <a\r\n\t\t\t\t\t\t\t\tclass=\"btn btn-primary filter-btn\"\r\n\t\t\t\t\t\t\t\thref=\"javascript:void(0);\"\r\n\t\t\t\t\t\t\t\t@click=\"toggleFilter\"\r\n\t\t\t\t\t\t\t\tid=\"filter_search\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<i class=\"fas fa-filter\"></i>\r\n\t\t\t\t\t\t\t</a> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"filter\" class=\"card filter-card\">\r\n          <div class=\"card-body pb-0\">\r\n            <div class=\"row\">\r\n              <!-- <div class=\"col-sm-6 col-md-3\">\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<label>Date</label>\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div> -->\r\n              <!-- <div class=\"col-sm-6 col-md-3\">\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<label>Status</label>\r\n\t\t\t\t\t\t\t\t\t<vue-select :options=\"paymentfilter\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div> -->\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Type</label>\r\n                  <vue-select\r\n                    v-model=\"searchForm.type\"\r\n                    :options=\"paymentfilter\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <!-- <div class=\"col-sm-6 col-md-3\">\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<label>Method</label>\r\n\t\t\t\t\t\t\t\t\t<vue-select :options=\"paymentfilter\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-sm-12\">\r\n            <div class=\"card card-table\">\r\n              <div class=\"card-body\">\r\n                <div class=\"table-responsive\">\r\n                  <div\r\n                    class=\"d-flex align-items-center justify-content-between p-4\"\r\n                  >\r\n                    <div>\r\n                      <span>Show</span>\r\n                      <select class=\"mx-1 py-1\" v-model=\"perPage\" name=\"\" id=\"\">\r\n                        <option value=\"50\">50</option>\r\n                        <option value=\"100\">100</option>\r\n                        <option value=\"200\">200</option>\r\n                        <option value=\"500\">500</option>\r\n                      </select>\r\n                      <span>transactions</span>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"searchForm.search\"\r\n                        placeholder=\"Search\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <table class=\"table table-center table-hover datatable\">\r\n                    <thead class=\"thead-light\">\r\n                      <tr>\r\n                        <th>#</th>\r\n                        <th>Reference ID</th>\r\n                        <th>User</th>\r\n                        <th>Amount</th>\r\n                        <th>Date</th>\r\n                        <th>Type</th>\r\n                        <th>Method</th>\r\n                        <th>Status</th>\r\n                        <th class=\"text-end\">Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr\r\n                        v-for=\"(item, index) in transactions.data\"\r\n                        :key=\"item.id\"\r\n                      >\r\n                        <td>{{ index + 1 }}</td>\r\n                        <td>\r\n                          {{ item.reference }}\r\n                        </td>\r\n                        <td>\r\n                          {{ item.user.name }}\r\n                        </td>\r\n                        <td>\r\n                          {{\r\n                            `${item.currency} ${addCurrencyComma(item.amount)}`\r\n                          }}\r\n                        </td>\r\n                        <td>\r\n                          {{ formatted(item.created_at) }}\r\n                        </td>\r\n                        <td class=\"text-capitalize\">{{ item.type }}</td>\r\n                        <td class=\"text-capitalize\">\r\n                          {{ item.method }}\r\n                        </td>\r\n                        <td>\r\n                          <span\r\n                            class=\"badge badge-pill text-capitalize\"\r\n                            :class=\"{\r\n                              'bg-warning': item.status == 'pending',\r\n                              'bg-danger': item.status == 'declined',\r\n                              'bg-success-light': item.status == 'approved',\r\n                            }\"\r\n                            >{{ item.status }}</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"text-center\">\r\n                          <div class=\"dropdown dropdown-action\">\r\n                            <a\r\n                              :disabled=\"\r\n                                item.status === 'declined' ||\r\n                                item.status === 'approved'\r\n                              \"\r\n                              class=\"action-icon dropdown-toggle\"\r\n                              data-bs-toggle=\"dropdown\"\r\n                              aria-expanded=\"false\"\r\n                              ><i class=\"fas fa-ellipsis-h\"></i\r\n                            ></a>\r\n                            <div\r\n                              class=\"dropdown-menu dropdown-menu-right\"\r\n                              style=\"width: fit-content\"\r\n                            >\r\n                              <a\r\n                                class=\"dropdown-item\"\r\n                                v-if=\"item.status == 'pending'\"\r\n                                @click=\"openModal(item, 'approve')\"\r\n                                ><i\r\n                                  class=\"far fa-check-circle text-success me-2\"\r\n                                ></i>\r\n                                Approve</a\r\n                              >\r\n                              <a\r\n                                class=\"dropdown-item\"\r\n                                v-if=\"item.status == 'pending'\"\r\n                                @click=\"openModal(item, 'decline')\"\r\n                                ><i\r\n                                  class=\"far fa-times-circle text-danger me-2\"\r\n                                ></i>\r\n                                Decline</a\r\n                              >\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  <div\r\n                    v-if=\"isFetching\"\r\n                    class=\"d-flex my-5 align-items-center justify-content-center\"\r\n                  >\r\n                    Loading...\r\n                  </div>\r\n                  <div\r\n                    v-if=\"!isFetching && length === 0\"\r\n                    class=\"d-flex my-5 align-items-center justify-content-center\"\r\n                  >\r\n                    No Data Available\r\n                  </div>\r\n                  <div\r\n                    v-if=\"!isFetching && length !== 0\"\r\n                    class=\"d-flex align-items-center justify-content-between p-4\"\r\n                  >\r\n                    <p v-if=\"transactions.meta\">\r\n                      Showing {{ transactions.data.length }} of\r\n                      {{ transactions.meta.total }} transactions\r\n                    </p>\r\n                    <div>\r\n                      <ul class=\"pagination mb-4\">\r\n                        <li\r\n                          class=\"page-item\"\r\n                          @click=\"previousPage\"\r\n                          :class=\"{ disabled: currentPage == 1 }\"\r\n                        >\r\n                          <a class=\"page-link\" href=\"javascript:;\" tabindex=\"-1\"\r\n                            >Previous</a\r\n                          >\r\n                        </li>\r\n                        <li\r\n                          class=\"page-item\"\r\n                          v-for=\"pageNumber in pageNumbers\"\r\n                          :key=\"pageNumber\"\r\n                          @click=\"setPage(pageNumber)\"\r\n                          :class=\"{\r\n                            active: pageNumber === currentPage,\r\n                          }\"\r\n                        >\r\n                          <a class=\"page-link\" href=\"javascript:;\">{{\r\n                            pageNumber\r\n                          }}</a>\r\n                        </li>\r\n                        <li class=\"page-item\" @click=\"nextPage\">\r\n                          <a class=\"page-link\" href=\"javascript:;\">Next</a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- /Page Wrapper -->\r\n    <div\r\n      id=\"top-modal\"\r\n      class=\"modal fade\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div class=\"modal-dialog modal-top\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h4 class=\"modal-title\" id=\"topModalLabel\">Transaction</h4>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn-close\"\r\n              data-bs-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            ></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <p v-if=\"selectedItem\">\r\n              Are you sure you want to\r\n              {{ selectedAction === \"decline\" ? \"decline\" : \"approve\" }}\r\n              <span v-if=\"selectedItem\"\r\n                >{{ selectedItem.user.name }} transaction?</span\r\n              >\r\n            </p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-light me-1\"\r\n              @click=\"closeModal\"\r\n            >\r\n              Close\r\n            </button>\r\n            <button\r\n              v-if=\"selectedItem && selectedAction === 'decline'\"\r\n              type=\"button\"\r\n              @click=\"declineTransaction(selectedItem.id)\"\r\n              class=\"btn btn-danger\"\r\n            >\r\n              Decline\r\n            </button>\r\n            <button\r\n              v-if=\"selectedItem && selectedAction === 'approve'\"\r\n              type=\"button\"\r\n              @click=\"approveTransaction(selectedItem.id)\"\r\n              class=\"btn btn-success\"\r\n            >\r\n              Approve\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <!-- /.modal-content -->\r\n      </div>\r\n    </div>\r\n    <!-- /.modal-dialog -->\r\n  </div>\r\n  <!-- /Main Wrapper -->\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { formatted } from \"../../../assets/composables/date\";\r\nimport { addCurrencyComma } from \"../../../assets/composables/currency\";\r\n\r\nconst store = useStore();\r\nconst filter = ref(false);\r\nconst currentPage = ref(1);\r\nconst perPage = ref(50);\r\nconst isFetching = ref(false);\r\nconst length = ref(null);\r\nconst selectedItem = ref(null);\r\nconst selectedAction = ref(\"\");\r\n\r\nconst searchForm = ref({\r\n  search: \"\",\r\n});\r\n\r\nwatch(\r\n  () => searchForm.value,\r\n  (newValue) => {\r\n    getTransactions(newValue.search);\r\n  },\r\n  { deep: true }\r\n);\r\n\r\nconst toggleFilter = () => {\r\n  filter.value = !filter.value;\r\n};\r\n\r\nwatch(perPage, (newValue) => {\r\n  perPage.value = newValue;\r\n  getTransactions();\r\n});\r\n\r\nconst paymentfilter = [\"All\", \"Deposit\", \"Withdrawal\", \"Others\"];\r\n\r\nconst transactions = computed(() => {\r\n  return store.getters[\"transaction/transactions\"];\r\n});\r\n\r\nconst getTransactions = (keyword = \"\") => {\r\n  isFetching.value = true;\r\n  let data = {\r\n    page: currentPage.value,\r\n    per_page: perPage.value,\r\n    type: \"deposit\",\r\n    query: keyword,\r\n  };\r\n  store\r\n    .dispatch(\"transaction/getTransactions\", data)\r\n    .then(() => {\r\n      isFetching.value = false;\r\n      length.value = transactions.value.data.length;\r\n    })\r\n    .catch(() => {\r\n      isFetching.value = false;\r\n    });\r\n};\r\n\r\nconst openModal = (data, action) => {\r\n  var myModal = new bootstrap.Modal(document.getElementById(\"top-modal\"), {\r\n    backdrop: \"static\",\r\n  });\r\n  myModal.show();\r\n\r\n  selectedItem.value = data;\r\n  selectedAction.value = action;\r\n};\r\nconst closeModal = () => {\r\n  var myModal = document.getElementById(\"top-modal\");\r\n  var modalTrigger = document.querySelector('[data-bs-dismiss=\"modal\"]');\r\n  modalTrigger.setAttribute(\"data-bs-target\", \"#\" + myModal.id);\r\n  modalTrigger.click();\r\n};\r\n\r\nconst approveTransaction = (id) => {\r\n  store.dispatch(\"transaction/approveTransaction\", id).then(() => {\r\n    closeModal();\r\n    getTransactions();\r\n  });\r\n};\r\nconst declineTransaction = (id) => {\r\n  store.dispatch(\"transaction/declineTransaction\", id).then(() => {\r\n    closeModal();\r\n    getTransactions();\r\n  });\r\n};\r\n\r\n// Pagination start\r\nconst total = computed(() => {\r\n  return store.getters[\"transaction/total\"];\r\n});\r\n\r\nconst setPage = (pageNumber) => {\r\n  currentPage.value = pageNumber;\r\n  getTransactions();\r\n};\r\n\r\nconst nextPage = () => {\r\n  currentPage.value++;\r\n  getTransactions();\r\n};\r\n\r\nconst previousPage = () => {\r\n  if (currentPage.value != 1) {\r\n    currentPage.value--;\r\n    getTransactions();\r\n  }\r\n};\r\n\r\nconst pageNumbers = computed(() => {\r\n  const maxVisiblePages = 10;\r\n  let startPage = Math.max(\r\n    currentPage.value - Math.floor(maxVisiblePages / 2),\r\n    1\r\n  );\r\n  const endPage = Math.min(startPage + maxVisiblePages - 1, total.value);\r\n\r\n  if (endPage - startPage + 1 < maxVisiblePages) {\r\n    startPage = Math.max(endPage - maxVisiblePages + 1, 1);\r\n  }\r\n\r\n  const pages = [];\r\n  for (let i = startPage; i <= endPage; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  return pages;\r\n});\r\n// Pagination End\r\n\r\nonMounted(() => {\r\n  getTransactions();\r\n});\r\n</script>\r\n"],"sourceRoot":""}