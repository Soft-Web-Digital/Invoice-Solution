{"version":3,"sources":["webpack:///./views/roles-and-permissions/roles/Roles.vue?6b83","webpack:///./views/roles-and-permissions/roles/Roles.vue"],"names":["__exports__","store","filter","currentPage","perPage","search","selectedItem","isFetching","length","newValue","Search","keyword","data","page","value","per_page","query","dispatch","closeModal","myModal","document","getElementById","modalTrigger","querySelector","setAttribute","id","click","deleteRole","getRoles","paymentfilter","roles","getters","then","catch","total","pageNumbers","i","push","splice","item","bootstrap","Modal","backdrop","show"],"mappings":"gmIAGA,MAAMA,G,yBCkQN,MAAMC,EAAQ,cAGRC,EAAS,aAAI,GACbC,GAAc,YAAI,GAClBC,GAAU,YAAI,IACdC,GAAS,YAAI,IACbC,GAAe,YAAI,MACnBC,GAAa,aAAI,GACjBC,GAAS,YAAI,MAEnB,gBAAMH,GAASI,IACbC,GAAOD,KAMT,MAAMC,GAAUC,IACd,IAAIC,EAAO,CACTC,KAAMV,GAAYW,MAClBC,SAAUX,GAAQU,MAClBE,MAAOL,GAETV,EAAMgB,SAAS,iBAAkBL,IAe7BM,GAAa,KACjB,IAAIC,EAAUC,SAASC,eAAe,aAClCC,EAAeF,SAASG,cAAc,6BAC1CD,EAAaE,aAAa,iBAAkB,IAAML,EAAQM,IAC1DH,EAAaI,SAGTC,GAAa,KACjB1B,EAAMgB,SAAS,mBAAoBX,GAAaQ,MAAMW,IACtDP,MAGF,gBAAMd,GAAUK,IACdL,GAAQU,MAAQL,EAChBmB,OAGF,MAAMC,GAAgB,CAAC,eAAgB,OAAQ,SAAU,OAAQ,UAE3DC,GAAQ,mBAAS,IACd7B,EAAM8B,QAAQ,gBAIjBH,GAAW,KACfrB,GAAWO,OAAQ,EACnB,IAAIF,EAAO,CACTC,KAAMV,GAAYW,MAClBC,SAAUX,GAAQU,MAClBE,MAAO,IAETf,EACGgB,SAAS,iBAAkBL,GAC3BoB,KAAK,KACJzB,GAAWO,OAAQ,EACnBN,GAAOM,MAAQgB,GAAMhB,MAAMF,KAAKJ,OAChCP,EAAMgB,SAAS,0BAEhBgB,MAAM,KACL1B,GAAWO,OAAQ,KAKnBoB,GAAQ,mBAAS,IACdjC,EAAM8B,QAAQ,gBAsBH,mBAAS,KAC3B,MAAMI,EAAc,GACpB,IAAK,IAAIC,EAAI,EAAGA,GAAKF,GAAMpB,MAAOsB,IAChCD,EAAYE,KAAKD,GAEnB,OAAID,EAAY3B,OAAS,GAChB2B,EAAYG,OAAO,EAAG,IAEtBH,I,OAMX,oBAAU,KACRlC,EAAMgB,SAAS,wBAEfW,O,ynIA5FgB,CAACW,IACH,IAAIC,UAAUC,MAAMrB,SAASC,eAAe,aAAc,CACtEqB,SAAU,WAEJC,OAERrC,GAAaQ,MAAQyB,G,w3CDrSR","file":"23.ba4b8b.bundle.js","sourcesContent":["import script from \"./Roles.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Roles.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <!-- Main Wrapper -->\r\n  <div class=\"main-wrapper\">\r\n    <layout-header></layout-header>\r\n    <layout-sidebar></layout-sidebar>\r\n\r\n    <!-- Notification -->\r\n    <div\r\n      v-if=\"store.state.roles.error\"\r\n      style=\"\r\n        width: fit-content;\r\n        position: fixed;\r\n        right: 10px;\r\n        top: 5px;\r\n        z-index: 9999;\r\n      \"\r\n      class=\"alert alert-danger alert-dismissible fade show pb-2 text-sm\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.roles.error }}</p>\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn-close\"\r\n        data-bs-dismiss=\"alert\"\r\n        aria-label=\"Close\"\r\n      ></button>\r\n    </div>\r\n    <div\r\n      v-if=\"store.state.roles.message\"\r\n      style=\"\r\n        width: fit-content;\r\n        position: fixed;\r\n        right: 10px;\r\n        top: 5px;\r\n        z-index: 9999;\r\n      \"\r\n      class=\"alert alert-success alert-dismissible fade show pb-2 text-sm\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.roles.message }}</p>\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn-close\"\r\n        data-bs-dismiss=\"alert\"\r\n        aria-label=\"Close\"\r\n      ></button>\r\n    </div>\r\n    <!-- Notification end -->\r\n\r\n    <!-- Page Wrapper -->\r\n    <div class=\"page-wrapper\">\r\n      {{ permissions }}\r\n      <div class=\"content container-fluid\">\r\n        <!-- Page Header -->\r\n        <div class=\"page-header\">\r\n          <div class=\"row align-items-center\">\r\n            <div class=\"col\">\r\n              <h3 class=\"page-title\">Roles and Permissions</h3>\r\n              <ul class=\"breadcrumb\">\r\n                <li class=\"breadcrumb-item\">\r\n                  <router-link to=\"/\">Dashboard</router-link>\r\n                </li>\r\n                <li class=\"breadcrumb-item active\">Roles and Permissions</li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"col-auto\" v-show=\"sortPermission(['Create Roles'])\">\r\n              <router-link to=\"/add-role\" class=\"btn btn-primary me-2\">\r\n                <i class=\"fas fa-plus\"></i>\r\n              </router-link>\r\n              <!-- <a\r\n                class=\"btn btn-primary filter-btn\"\r\n                href=\"javascript:void(0);\"\r\n                @click=\"toggleFilter\"\r\n                id=\"filter_search\"\r\n              >\r\n                <i class=\"fas fa-filter\"></i>\r\n              </a> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"filter\" class=\"card filter-card\">\r\n          <div class=\"card-body pb-0\">\r\n            <div class=\"row\">\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Date</label>\r\n                  <input type=\"text\" class=\"form-control\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Status</label>\r\n                  <vue-select :options=\"paymentfilter\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Type</label>\r\n                  <vue-select :options=\"paymentfilter\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Method</label>\r\n                  <vue-select :options=\"paymentfilter\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-sm-12\">\r\n            <div class=\"card card-table\">\r\n              <div class=\"card-body\">\r\n                <div class=\"table-responsive\">\r\n                  <div\r\n                    class=\"d-flex align-items-center justify-content-between p-4\"\r\n                  >\r\n                    <div>\r\n                      <span>Show</span>\r\n                      <select class=\"mx-1 py-1\" v-model=\"perPage\" name=\"\" id=\"\">\r\n                        <option value=\"50\">50</option>\r\n                        <option value=\"100\">100</option>\r\n                        <option value=\"200\">200</option>\r\n                        <option value=\"500\">500</option>\r\n                      </select>\r\n                      <span>roles</span>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        placeholder=\"Search\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <table class=\"table table-center table-hover datatable\">\r\n                    <thead class=\"thead-light\">\r\n                      <tr>\r\n                        <th>Name</th>\r\n                        <th>No of Admins</th>\r\n                        <th>No of Permissions</th>\r\n                        <th>Date Added</th>\r\n                        <th class=\"text-end\">Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"item in roles.data\" :key=\"item.id\">\r\n                        <td>\r\n                          <a href=\"javascript:void(0);\">{{ item.name }}</a>\r\n                        </td>\r\n                        <td>{{ item.admins }}</td>\r\n                        <td>{{ item.permissions.length }}</td>\r\n                        <td>{{ formatted(item.created_at) }}</td>\r\n                        <td class=\"text-center\">\r\n                          <div class=\"dropdown dropdown-action\">\r\n                            <a\r\n                              href=\"javascript:void(0)\"\r\n                              class=\"action-icon dropdown-toggle\"\r\n                              data-bs-toggle=\"dropdown\"\r\n                              aria-expanded=\"false\"\r\n                              ><i class=\"fas fa-ellipsis-h\"></i\r\n                            ></a>\r\n                            <div\r\n                              class=\"dropdown-menu dropdown-menu-right\"\r\n                              style=\"width: fit-content\"\r\n                              v-show=\"sortPermission(['Update Roles'])\"\r\n                            >\r\n                              <router-link\r\n                                :to=\"'/edit-role/' + item.id\"\r\n                                class=\"dropdown-item\"\r\n                                ><i class=\"fa fa-edit me-2\"></i>\r\n                                Edit</router-link\r\n                              >\r\n                              <a\r\n                              v-show=\"sortPermission([''])\"\r\n                                class=\"dropdown-item cursor-pointer\"\r\n                                data-bs-toggle=\"modal\"\r\n                                href=\"javascript:void(0);\"\r\n                                @click=\"openModal(item)\"\r\n                                ><i class=\"fa fa-trash me-2\"></i>Delete</a\r\n                              >\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  <div\r\n                    v-if=\"isFetching\"\r\n                    class=\"d-flex my-5 align-items-center justify-content-center\"\r\n                  >\r\n                    Loading...\r\n                  </div>\r\n                  <div\r\n                    v-if=\"length === 0\"\r\n                    class=\"d-flex my-5 align-items-center justify-content-center\"\r\n                  >\r\n                    No Data Available\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- /Page Wrapper -->\r\n    <div\r\n      id=\"top-modal\"\r\n      class=\"modal fade\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div class=\"modal-dialog modal-top\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h4 class=\"modal-title\" id=\"topModalLabel\">Delete Role</h4>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn-close\"\r\n              data-bs-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            ></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <!-- <h5>Text in a modal</h5> -->\r\n            <p>\r\n              Are you sure you want to delete\r\n              <span v-if=\"selectedItem\">{{ selectedItem.name }}?</span>\r\n            </p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-light me-1\"\r\n              @click=\"closeModal\"\r\n            >\r\n              Close\r\n            </button>\r\n            <button type=\"button\" @click=\"deleteRole\" class=\"btn btn-danger\">\r\n              Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <!-- /.modal-content -->\r\n      </div>\r\n      <!-- /.modal-dialog -->\r\n    </div>\r\n  </div>\r\n  <!-- /Main Wrapper -->\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { formatted } from \"../../../assets/composables/date\";\r\nimport { sortPermission } from \"../../../assets/composables/permission\";\r\nconst store = useStore();\r\n\r\n\r\nconst filter = ref(false);\r\nconst currentPage = ref(1);\r\nconst perPage = ref(50);\r\nconst search = ref(\"\");\r\nconst selectedItem = ref(null);\r\nconst isFetching = ref(false);\r\nconst length = ref(null);\r\n\r\nwatch(search, (newValue) => {\r\n  Search(newValue);\r\n});\r\n\r\n\r\n\r\n\r\nconst Search = (keyword) => {\r\n  let data = {\r\n    page: currentPage.value,\r\n    per_page: perPage.value,\r\n    query: keyword,\r\n  };\r\n  store.dispatch(\"roles/getRoles\", data);\r\n};\r\n\r\nconst toggleFilter = () => {\r\n  filter.value = !filter.value;\r\n};\r\n\r\nconst openModal = (item) => {\r\n  var myModal = new bootstrap.Modal(document.getElementById(\"top-modal\"), {\r\n    backdrop: \"static\",\r\n  });\r\n  myModal.show();\r\n\r\n  selectedItem.value = item;\r\n};\r\nconst closeModal = () => {\r\n  var myModal = document.getElementById(\"top-modal\");\r\n  var modalTrigger = document.querySelector('[data-bs-dismiss=\"modal\"]');\r\n  modalTrigger.setAttribute(\"data-bs-target\", \"#\" + myModal.id);\r\n  modalTrigger.click();\r\n};\r\n\r\nconst deleteRole = () => {\r\n  store.dispatch(\"roles/deleteRole\", selectedItem.value.id);\r\n  closeModal();\r\n};\r\n\r\nwatch(perPage, (newValue) => {\r\n  perPage.value = newValue;\r\n  getRoles();\r\n});\r\n\r\nconst paymentfilter = [\"Payment Mode\", \"Cash\", \"Cheque\", \"Card\", \"Online\"];\r\n\r\nconst roles = computed(() => {\r\n  return store.getters[\"roles/roles\"];\r\n});\r\n\r\n\r\nconst getRoles = () => {\r\n  isFetching.value = true;\r\n  let data = {\r\n    page: currentPage.value,\r\n    per_page: perPage.value,\r\n    query: \"\",\r\n  };\r\n  store\r\n    .dispatch(\"roles/getRoles\", data)\r\n    .then(() => {\r\n      isFetching.value = false;\r\n      length.value = roles.value.data.length;\r\n      store.dispatch(\"roles/getPermissions\");\r\n    })\r\n    .catch(() => {\r\n      isFetching.value = false;\r\n    });\r\n};\r\n\r\n// Pagination start\r\nconst total = computed(() => {\r\n  return store.getters[\"admin/total\"];\r\n});\r\n\r\nconst setPage = (pageNumber) => {\r\n  currentPage.value = pageNumber;\r\n  getRoles();\r\n};\r\n\r\nconst nextPage = () => {\r\n  if (pageNumbers.length > 1) {\r\n    currentPage.value++;\r\n    getRoles();\r\n  }\r\n};\r\n\r\nconst previousPage = () => {\r\n  if (currentPage.value != 1) {\r\n    currentPage.value--;\r\n    getRoles();\r\n  }\r\n};\r\n\r\nconst pageNumbers = computed(() => {\r\n  const pageNumbers = [];\r\n  for (let i = 1; i <= total.value; i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n  if (pageNumbers.length > 10) {\r\n    return pageNumbers.splice(0, 10);\r\n  } else {\r\n    return pageNumbers;\r\n  }\r\n});\r\n// Pagination End\r\n\r\n\r\nonMounted(() => {\r\n  store.dispatch(\"roles/getPermissions\");\r\n \r\n  getRoles();\r\n\r\n});\r\n</script>\r\n"],"sourceRoot":""}