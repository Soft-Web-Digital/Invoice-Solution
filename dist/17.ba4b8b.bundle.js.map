{"version":3,"sources":["webpack:///./views/pages/user/tabs/UserSubscription.vue?2da9","webpack:///./views/pages/user/tabs/UserSubscription.vue"],"names":["__exports__","store","route","currentPage","perPage","search","isFetching","length","newValue","Search","keyword","data","page","value","per_page","query","dispatch","getSubscriptions","subscriptions","getters","id","params","then","catch","total","pageNumbers","i","push","splice"],"mappings":"4rDAGA,MAAMA,E,oCCyIL,MAAMC,EAAQ,cACRC,EAAQ,cACRC,EAAc,YAAI,GAClBC,EAAU,YAAI,IACdC,EAAS,YAAI,IACbC,EAAa,aAAI,GACjBC,EAAS,YAAI,MAEnB,gBAAMF,EAASG,IACdC,EAAOD,KAGR,MAAMC,EAAUC,IACf,IAAIC,EAAO,CACVC,KAAMT,EAAYU,MAClBC,SAAUV,EAAQS,MAClBE,MAAOL,GAERT,EAAMe,SAAS,6BAA8BL,IAG9C,gBAAMP,EAAUI,IACfJ,EAAQS,MAAQL,EAChBS,MAGD,MAAMC,EAAgB,mBAAS,IACvBjB,EAAMkB,QAAQ,4BAGhBF,EAAmB,KACxBX,EAAWO,OAAQ,EACnB,IAAIF,EAAO,CACVS,GAAIlB,EAAMmB,OAAOD,GACjBR,KAAMT,EAAYU,MAClBC,SAAUV,EAAQS,MAClBE,MAAO,IAERd,EACEe,SAAS,6BAA8BL,GACvCW,KAAK,KACLhB,EAAWO,OAAQ,EACnBN,EAAOM,MAAQK,EAAcL,MAAMF,KAAKJ,SAExCgB,MAAM,KACNjB,EAAWO,OAAQ,KAKhBW,EAAQ,mBAAS,IACfvB,EAAMkB,QAAQ,gBAsBF,mBAAS,KAC5B,MAAMM,EAAc,GACpB,IAAK,IAAIC,EAAI,EAAGA,GAAKF,EAAMX,MAAOa,IACjCD,EAAYE,KAAKD,GAElB,OAAID,EAAYlB,OAAS,GACjBkB,EAAYG,OAAO,EAAG,IAEtBH,I,OAKT,oBAAU,KACTR,M,ihHD9Na","file":"17.ba4b8b.bundle.js","sourcesContent":["import script from \"./UserSubscription.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserSubscription.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n\t<div class=\"card bg-white\">\r\n\t\t<div class=\"card-body pt-0\">\r\n\t\t\t<div class=\"table-responsive mt-0\">\r\n\t\t\t\t<div class=\"d-flex align-items-center justify-content-between py-4\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<span>Show</span>\r\n\t\t\t\t\t\t<select class=\"mx-1 py-1\" v-model=\"perPage\" name=\"\" id=\"\">\r\n\t\t\t\t\t\t\t<option value=\"50\">50</option>\r\n\t\t\t\t\t\t\t<option value=\"100\">100</option>\r\n\t\t\t\t\t\t\t<option value=\"200\">200</option>\r\n\t\t\t\t\t\t\t<option value=\"500\">500</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<span>subscriptions</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" placeholder=\"Search\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<table class=\"table table-stripped table-center table-hover datatable\">\r\n\t\t\t\t\t<thead class=\"thead-light\">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>#</th>\r\n\t\t\t\t\t\t\t<th>Plan</th>\r\n\t\t\t\t\t\t\t<th>Duration</th>\r\n\t\t\t\t\t\t\t<th>Amount</th>\r\n\t\t\t\t\t\t\t<th>Date Created</th>\r\n\t\t\t\t\t\t\t<th>Due Date</th>\r\n\t\t\t\t\t\t\t<th>Status</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody v-if=\"subscriptions.data && subscriptions.data.length > 0\">\r\n\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\tv-for=\"(subscription, index) in subscriptions.data\"\r\n\t\t\t\t\t\t\t:key=\"subscription.id\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<td>{{ index + 1 }}</td>\r\n\t\t\t\t\t\t\t<td class=\"text-capitalize\">\r\n\t\t\t\t\t\t\t\t{{ subscription.plan.name }}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclass=\"text-capitalize\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"subscription.plan.duration === 'unlimited'\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ subscription.plan.duration }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span v-else-if=\"subscription.plan.duration === 1\">\r\n\t\t\t\t\t\t\t\t\t{{ `${subscription.plan.duration} month` }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span v-else> 1 year </span>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t`NGN ${subscription.plan.amount_ngn} (USD ${subscription.plan.amount_usd})`\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>{{ formatted(subscription.starts_at) }}</td>\r\n\t\t\t\t\t\t\t<td>{{ formatted(subscription.ends_at) }}</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclass=\"badge badge-pill text-capitalize bg-success-light\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"subscription.status === 'active'\"\r\n\t\t\t\t\t\t\t\t\t>{{ subscription.status }}</span\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclass=\"badge badge-pill text-capitalize bg-danger-light\"\r\n\t\t\t\t\t\t\t\t\tv-else-if=\"\r\n\t\t\t\t\t\t\t\t\t\tsubscription.status === 'inactive' ||\r\n\t\t\t\t\t\t\t\t\t\tsubscription.status === 'cancelled'\r\n\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t>{{ subscription.status }}</span\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-if=\"isFetching\"\r\n\t\t\t\t\tclass=\"d-flex my-5 align-items-center justify-content-center\"\r\n\t\t\t\t>\r\n\t\t\t\t\tLoading...\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-if=\"length === 0\"\r\n\t\t\t\t\tclass=\"d-flex my-5 align-items-center justify-content-center\"\r\n\t\t\t\t>\r\n\t\t\t\t\tNo Data Available\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- <div\r\n      v-if=\"!isFetching && length !== 0\"\r\n      class=\"d-flex align-items-center justify-content-between p-4\"\r\n    >\r\n      <p v-if=\"subscriptions.meta\">\r\n        Showing {{ subscriptions.data.length }} of\r\n        {{ subscriptions.meta.total }} estimates\r\n      </p>\r\n      <div>\r\n        <ul class=\"pagination mb-4\">\r\n          <li\r\n            class=\"page-item\"\r\n            @click=\"previousPage\"\r\n            :class=\"{ disabled: currentPage == 1 }\"\r\n          >\r\n            <a class=\"page-link\" href=\"javascript:;\" tabindex=\"-1\">Previous</a>\r\n          </li>\r\n          <li\r\n            class=\"page-item\"\r\n            v-for=\"pageNumber in pageNumbers\"\r\n            :key=\"pageNumber\"\r\n            @click=\"setPage(pageNumber)\"\r\n            :class=\"{\r\n              active: pageNumber === currentPage,\r\n            }\"\r\n          >\r\n            <a class=\"page-link\" href=\"javascript:;\">{{ pageNumber }}</a>\r\n          </li>\r\n          <li\r\n            class=\"page-item\"\r\n            @click=\"nextPage\"\r\n            :class=\"{ disabled: pageNumbers.length <= 1 }\"\r\n          >\r\n            <a class=\"page-link\" href=\"javascript:;\">Next</a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div> -->\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, computed, watch } from \"vue\";\r\n\timport { useStore } from \"vuex\";\r\n\timport { useRoute } from \"vue-router\";\r\n\timport { formatted } from \"../../../../assets/composables/date\";\r\n\timport { useCurrency } from \"../../../../assets/composables/currency\";\r\n\r\n\tconst store = useStore();\r\n\tconst route = useRoute();\r\n\tconst currentPage = ref(1);\r\n\tconst perPage = ref(50);\r\n\tconst search = ref(\"\");\r\n\tconst isFetching = ref(false);\r\n\tconst length = ref(null);\r\n\r\n\twatch(search, (newValue) => {\r\n\t\tSearch(newValue);\r\n\t});\r\n\r\n\tconst Search = (keyword) => {\r\n\t\tlet data = {\r\n\t\t\tpage: currentPage.value,\r\n\t\t\tper_page: perPage.value,\r\n\t\t\tquery: keyword,\r\n\t\t};\r\n\t\tstore.dispatch(\"users/getUserSubscriptions\", data);\r\n\t};\r\n\r\n\twatch(perPage, (newValue) => {\r\n\t\tperPage.value = newValue;\r\n\t\tgetSubscriptions();\r\n\t});\r\n\r\n\tconst subscriptions = computed(() => {\r\n\t\treturn store.getters[\"users/usersubscriptions\"];\r\n\t});\r\n\r\n\tconst getSubscriptions = () => {\r\n\t\tisFetching.value = true;\r\n\t\tlet data = {\r\n\t\t\tid: route.params.id,\r\n\t\t\tpage: currentPage.value,\r\n\t\t\tper_page: perPage.value,\r\n\t\t\tquery: \"\",\r\n\t\t};\r\n\t\tstore\r\n\t\t\t.dispatch(\"users/getUserSubscriptions\", data)\r\n\t\t\t.then(() => {\r\n\t\t\t\tisFetching.value = false;\r\n\t\t\t\tlength.value = subscriptions.value.data.length;\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tisFetching.value = false;\r\n\t\t\t});\r\n\t};\r\n\r\n\t// Pagination start\r\n\tconst total = computed(() => {\r\n\t\treturn store.getters[\"users/total\"];\r\n\t});\r\n\r\n\tconst setPage = (pageNumber) => {\r\n\t\tcurrentPage.value = pageNumber;\r\n\t\tgetEstimates();\r\n\t};\r\n\r\n\tconst nextPage = () => {\r\n\t\tif (pageNumbers.length > 1) {\r\n\t\t\tcurrentPage.value++;\r\n\t\t\tgetSubscriptions();\r\n\t\t}\r\n\t};\r\n\r\n\tconst previousPage = () => {\r\n\t\tif (currentPage.value != 1) {\r\n\t\t\tcurrentPage.value--;\r\n\t\t\tgetSubscriptions();\r\n\t\t}\r\n\t};\r\n\r\n\tconst pageNumbers = computed(() => {\r\n\t\tconst pageNumbers = [];\r\n\t\tfor (let i = 1; i <= total.value; i++) {\r\n\t\t\tpageNumbers.push(i);\r\n\t\t}\r\n\t\tif (pageNumbers.length > 10) {\r\n\t\t\treturn pageNumbers.splice(0, 10);\r\n\t\t} else {\r\n\t\t\treturn pageNumbers;\r\n\t\t}\r\n\t});\r\n\t// Pagination End\r\n\r\n\tonMounted(() => {\r\n\t\tgetSubscriptions();\r\n\t});\r\n</script>\r\n"],"sourceRoot":""}