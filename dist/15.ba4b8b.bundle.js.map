{"version":3,"sources":["webpack:///./views/pages/user/tabs/UserExpenses.vue?b2a9","webpack:///./views/pages/user/tabs/UserExpenses.vue"],"names":["__exports__","store","route","currentPage","perPage","search","isFetching","length","newValue","getExpenses","value","expenses","getters","keyword","data","id","params","page","per_page","query","dispatch","then","catch","total","nextPage","pageNumbers","previousPage","startPage","Math","max","floor","maxVisiblePages","endPage","min","pages","i","push","pageNumber"],"mappings":"utDAGA,MAAMA,E,gCCuIL,MAAMC,EAAQ,cACRC,EAAQ,cACRC,EAAc,YAAI,GAClBC,EAAU,YAAI,IACdC,EAAS,YAAI,IACbC,EAAa,aAAI,GACjBC,EAAS,YAAI,MAEnB,gBAAMF,EAASG,IACdC,EAAYD,KAGb,gBAAMJ,EAAUI,IACfJ,EAAQM,MAAQF,EAChBC,MAGD,MAAME,EAAW,mBAAS,IAClBV,EAAMW,QAAQ,uBAGhBH,EAAc,CAACI,EAAU,MAC9B,IAAIC,EAAO,CACVC,GAAIb,EAAMc,OAAOD,GACjBE,KAAMd,EAAYO,MAClBQ,SAAUd,EAAQM,MAClBS,MAAON,GAERZ,EACEmB,SAAS,wBAAyBN,GAClCO,KAAK,KACLf,EAAWI,OAAQ,EACnBH,EAAOG,MAAQC,EAASD,MAAMI,KAAKP,SAEnCe,MAAM,KACNhB,EAAWI,OAAQ,KAKhBa,EAAQ,mBAAS,IACftB,EAAMW,QAAQ,yBAQhBY,EAAW,KACZC,EAAYlB,OAAS,IACxBJ,EAAYO,QACZD,MAIIiB,EAAe,KACK,GAArBvB,EAAYO,QACfP,EAAYO,QACZD,MAIIgB,EAAc,mBAAS,KAE5B,IAAIE,EAAYC,KAAKC,IACpB1B,EAAYO,MAAQkB,KAAKE,MAAMC,GAC/B,GAED,MAAMC,EAAUJ,KAAKK,IAAIN,EALD,GAK+B,EAAGJ,EAAMb,OAE5DsB,EAAUL,EAAY,EAPF,KAQvBA,EAAYC,KAAKC,IAAIG,EARE,GAQ0B,EAAG,IAGrD,MAAME,EAAQ,GACd,IAAK,IAAIC,EAAIR,EAAWQ,GAAKH,EAASG,IACrCD,EAAME,KAAKD,GAGZ,OAAOD,I,OAIR,oBAAU,KACTzB,M,46FAzCe,CAAC4B,IAChBlC,EAAYO,MAAQ2B,EACpB5B,K,iRDnLa","file":"15.ba4b8b.bundle.js","sourcesContent":["import script from \"./UserExpenses.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserExpenses.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n\t<div class=\"table-responsive\">\r\n\t\t<div class=\"d-flex align-items-center justify-content-between py-4\">\r\n\t\t\t<div>\r\n\t\t\t\t<span>Show</span>\r\n\t\t\t\t<select class=\"mx-1 py-1\" v-model=\"perPage\" name=\"\" id=\"\">\r\n\t\t\t\t\t<option value=\"50\">50</option>\r\n\t\t\t\t\t<option value=\"100\">100</option>\r\n\t\t\t\t\t<option value=\"200\">200</option>\r\n\t\t\t\t\t<option value=\"500\">500</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<span>expenses</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<input\r\n\t\t\t\t\tv-model=\"search\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\tplaceholder=\"Search\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<table class=\"table table-stripped table-center table-hover datatable\">\r\n\t\t\t<thead class=\"thead-light\">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>#</th>\r\n\t\t\t\t\t<th>Customer</th>\r\n\t\t\t\t\t<th>Amount</th>\r\n\t\t\t\t\t<th>Date Created</th>\r\n\t\t\t\t\t<th>Status</th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr v-for=\"(expense, index) in expenses.data\" :key=\"expense.id\">\r\n\t\t\t\t\t<td>{{ index + 1 }}</td>\r\n\r\n\t\t\t\t\t<td>{{ expense.customer.name }}</td>\r\n\t\t\t\t\t<td>{{ `${expense.currency} ${expense.amount}` }}</td>\r\n\t\t\t\t\t<td>{{ formatted(expense.created_at) }}</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"badge badge-pill text-capitalize bg-success-light\"\r\n\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\texpense.status === 'paid' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'sent' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'viewed' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'accepted'\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t>{{ expense.status }}</span\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"badge badge-pill text-capitalize bg-warning-light\"\r\n\t\t\t\t\t\t\tv-else-if=\"\r\n\t\t\t\t\t\t\t\texpense.status === 'draft' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'pending' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'unpaid' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'recurring' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'partially_paid'\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t>{{\r\n\t\t\t\t\t\t\t\texpense.status === \"partially_paid\"\r\n\t\t\t\t\t\t\t\t\t? \"Partially paid\"\r\n\t\t\t\t\t\t\t\t\t: expense.status\r\n\t\t\t\t\t\t\t}}</span\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"badge badge-pill text-capitalize bg-danger-light\"\r\n\t\t\t\t\t\t\tv-else-if=\"\r\n\t\t\t\t\t\t\t\texpense.status === 'expired' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'rejected' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'refunded' ||\r\n\t\t\t\t\t\t\t\texpense.status === 'overdue'\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t>{{ expense.status }}</span\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t\t<div\r\n\t\t\tv-if=\"isFetching\"\r\n\t\t\tclass=\"d-flex my-5 align-items-center justify-content-center\"\r\n\t\t>\r\n\t\t\tLoading...\r\n\t\t</div>\r\n\t\t<div\r\n\t\t\tv-if=\"!isFetching && length === 0\"\r\n\t\t\tclass=\"d-flex my-5 align-items-center justify-content-center\"\r\n\t\t>\r\n\t\t\tNo Data Available\r\n\t\t</div>\r\n\t\t<div\r\n\t\t\tv-if=\"length !== 0\"\r\n\t\t\tclass=\"d-flex align-items-center justify-content-between p-4\"\r\n\t\t>\r\n\t\t\t<p v-if=\"expenses.meta\">\r\n\t\t\t\tShowing {{ expenses.data.length }} of {{ expenses.meta.total }} expenses\r\n\t\t\t</p>\r\n\t\t\t<div>\r\n\t\t\t\t<ul class=\"pagination mb-4\">\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tclass=\"page-item\"\r\n\t\t\t\t\t\t@click=\"previousPage\"\r\n\t\t\t\t\t\t:class=\"{ disabled: currentPage == 1 }\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<a class=\"page-link\" href=\"javascript:;\" tabindex=\"-1\">Previous</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tclass=\"page-item\"\r\n\t\t\t\t\t\tv-for=\"pageNumber in pageNumbers\"\r\n\t\t\t\t\t\t:key=\"pageNumber\"\r\n\t\t\t\t\t\t@click=\"setPage(pageNumber)\"\r\n\t\t\t\t\t\t:class=\"{\r\n\t\t\t\t\t\t\tactive: pageNumber === currentPage,\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<a class=\"page-link\" href=\"javascript:;\">{{ pageNumber }}</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tclass=\"page-item\"\r\n\t\t\t\t\t\t@click=\"nextPage\"\r\n\t\t\t\t\t\t:class=\"{ disabled: pageNumbers.length <= 1 }\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<a class=\"page-link\" href=\"javascript:;\">Next</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, computed, watch } from \"vue\";\r\n\timport { useStore } from \"vuex\";\r\n\timport { useRoute } from \"vue-router\";\r\n\timport { formatted } from \"../../../../assets/composables/date\";\r\n\r\n\tconst store = useStore();\r\n\tconst route = useRoute();\r\n\tconst currentPage = ref(1);\r\n\tconst perPage = ref(50);\r\n\tconst search = ref(\"\");\r\n\tconst isFetching = ref(false);\r\n\tconst length = ref(null);\r\n\r\n\twatch(search, (newValue) => {\r\n\t\tgetExpenses(newValue);\r\n\t});\r\n\r\n\twatch(perPage, (newValue) => {\r\n\t\tperPage.value = newValue;\r\n\t\tgetExpenses();\r\n\t});\r\n\r\n\tconst expenses = computed(() => {\r\n\t\treturn store.getters[\"users/userexpenses\"];\r\n\t});\r\n\r\n\tconst getExpenses = (keyword = \"\") => {\r\n\t\tlet data = {\r\n\t\t\tid: route.params.id,\r\n\t\t\tpage: currentPage.value,\r\n\t\t\tper_page: perPage.value,\r\n\t\t\tquery: keyword,\r\n\t\t};\r\n\t\tstore\r\n\t\t\t.dispatch(\"users/getUserExpenses\", data)\r\n\t\t\t.then(() => {\r\n\t\t\t\tisFetching.value = false;\r\n\t\t\t\tlength.value = expenses.value.data.length;\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tisFetching.value = false;\r\n\t\t\t});\r\n\t};\r\n\r\n\t// Pagination start\r\n\tconst total = computed(() => {\r\n\t\treturn store.getters[\"users/expenses_total\"];\r\n\t});\r\n\r\n\tconst setPage = (pageNumber) => {\r\n\t\tcurrentPage.value = pageNumber;\r\n\t\tgetExpenses();\r\n\t};\r\n\r\n\tconst nextPage = () => {\r\n\t\tif (pageNumbers.length > 1) {\r\n\t\t\tcurrentPage.value++;\r\n\t\t\tgetExpenses();\r\n\t\t}\r\n\t};\r\n\r\n\tconst previousPage = () => {\r\n\t\tif (currentPage.value != 1) {\r\n\t\t\tcurrentPage.value--;\r\n\t\t\tgetExpenses();\r\n\t\t}\r\n\t};\r\n\r\n\tconst pageNumbers = computed(() => {\r\n\t\tconst maxVisiblePages = 10;\r\n\t\tlet startPage = Math.max(\r\n\t\t\tcurrentPage.value - Math.floor(maxVisiblePages / 2),\r\n\t\t\t1\r\n\t\t);\r\n\t\tconst endPage = Math.min(startPage + maxVisiblePages - 1, total.value);\r\n\r\n\t\tif (endPage - startPage + 1 < maxVisiblePages) {\r\n\t\t\tstartPage = Math.max(endPage - maxVisiblePages + 1, 1);\r\n\t\t}\r\n\r\n\t\tconst pages = [];\r\n\t\tfor (let i = startPage; i <= endPage; i++) {\r\n\t\t\tpages.push(i);\r\n\t\t}\r\n\r\n\t\treturn pages;\r\n\t});\r\n\t// Pagination End\r\n\r\n\tonMounted(() => {\r\n\t\tgetExpenses();\r\n\t});\r\n</script>\r\n"],"sourceRoot":""}