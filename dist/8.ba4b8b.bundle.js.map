{"version":3,"sources":["webpack:///./views/notification/Notification.vue?ef4e","webpack:///./views/notification/Notification.vue"],"names":["__exports__","store","filter","currentPage","perPage","search","selectedItem","isFetching","length","newValue","Search","keyword","data","page","value","per_page","query","dispatch","closeModal","myModal","document","getElementById","modalTrigger","querySelector","setAttribute","id","click","deleteNotification","getNotifications","paymentfilter","notifications","getters","then","catch","total","nextPage","pageNumbers","previousPage","i","push","splice","item","bootstrap","Modal","backdrop","show","pageNumber"],"mappings":"wgIAGA,MAAMA,G,gCC4SN,MAAMC,EAAQ,cACRC,EAAS,aAAI,GACbC,GAAc,YAAI,GAClBC,GAAU,YAAI,IACdC,GAAS,YAAI,IACbC,GAAe,YAAI,MACnBC,GAAa,aAAI,GACjBC,GAAS,YAAI,MAEnB,gBAAMH,GAASI,IACbC,GAAOD,KAGT,MAAMC,GAAUC,IACd,IAAIC,EAAO,CACTC,KAAMV,GAAYW,MAClBC,SAAUX,GAAQU,MAClBE,MAAOL,GAETV,EAAMgB,SAAS,gCAAiCL,IAe5CM,GAAa,KACjB,IAAIC,EAAUC,SAASC,eAAe,aAClCC,EAAeF,SAASG,cAAc,6BAC1CD,EAAaE,aAAa,iBAAkB,IAAML,EAAQM,IAC1DH,EAAaI,SAOTC,GAAqB,KACzB1B,EAAMgB,SAAS,kCAAmCX,GAAaQ,MAAMW,IACrEP,MAGF,gBAAMd,GAAUK,IACdL,GAAQU,MAAQL,EAChBmB,OAGF,MAAMC,GAAgB,CAAC,eAAgB,OAAQ,SAAU,OAAQ,UAE3DC,GAAgB,mBAAS,IACtB7B,EAAM8B,QAAQ,+BAGjBH,GAAmB,KACvBrB,GAAWO,OAAQ,EACnB,IAAIF,EAAO,CACTC,KAAMV,GAAYW,MAClBC,SAAUX,GAAQU,MAClBE,MAAO,IAETf,EACGgB,SAAS,gCAAiCL,GAC1CoB,KAAK,KACJzB,GAAWO,OAAQ,EACnBN,GAAOM,MAAQgB,GAAchB,MAAMF,KAAKJ,SAEzCyB,MAAM,KACL1B,GAAWO,OAAQ,KAKnBoB,GAAQ,mBAAS,IACdjC,EAAM8B,QAAQ,uBAQjBI,GAAW,KACXC,GAAY5B,OAAS,IACvBL,GAAYW,QACZc,OAIES,GAAe,KACM,GAArBlC,GAAYW,QACdX,GAAYW,QACZc,OAIEQ,GAAc,mBAAS,KAC3B,MAAMA,EAAc,GACpB,IAAK,IAAIE,EAAI,EAAGA,GAAKJ,GAAMpB,MAAOwB,IAChCF,EAAYG,KAAKD,GAEnB,OAAIF,EAAY5B,OAAS,GAChB4B,EAAYI,OAAO,EAAG,IAEtBJ,I,OAKX,oBAAU,KACRR,O,6/IA5E0BH,E,UAC1BxB,EAAMgB,SAAS,kCAAmCQ,GADzB,IAACA,I,8IAfV,CAACgB,IACH,IAAIC,UAAUC,MAAMvB,SAASC,eAAe,aAAc,CACtEuB,SAAU,WAEJC,OAERvC,GAAaQ,MAAQ2B,G,iqCAoDP,CAACK,IACf3C,GAAYW,MAAQgC,EACpBlB,M,ooCDhYa","file":"8.ba4b8b.bundle.js","sourcesContent":["import script from \"./Notification.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Notification.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <!-- Main Wrapper -->\r\n  <div class=\"main-wrapper\">\r\n    <layout-header></layout-header>\r\n    <layout-sidebar></layout-sidebar>\r\n\r\n    <!-- Notification -->\r\n    <div\r\n      v-if=\"store.state.notification.error\"\r\n      class=\"alert notify-danger alert-dismissible\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.notification.error }}</p>\r\n    </div>\r\n    <div\r\n      v-if=\"store.state.notification.message\"\r\n      class=\"alert success-success alert-dismissible\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.notification.message }}</p>\r\n    </div>\r\n    <!-- Notification end -->\r\n\r\n    <!-- Page Wrapper -->\r\n    <div class=\"page-wrapper\">\r\n      <div class=\"content container-fluid\">\r\n        <!-- Page Header -->\r\n        <div class=\"page-header\">\r\n          <div class=\"row align-items-center\">\r\n            <div class=\"col\">\r\n              <h3 class=\"page-title\">Notifications</h3>\r\n              <ul class=\"breadcrumb\">\r\n                <li class=\"breadcrumb-item\">\r\n                  <router-link to=\"/\">Dashboard</router-link>\r\n                </li>\r\n                <li class=\"breadcrumb-item active\">Notifications</li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"col-auto\">\r\n              <router-link\r\n                to=\"/create-notification\"\r\n                class=\"btn btn-primary me-2\"\r\n              >\r\n                <i class=\"fas fa-plus\"></i>\r\n              </router-link>\r\n              <!-- <a\r\n                class=\"btn btn-primary filter-btn\"\r\n                href=\"javascript:void(0);\"\r\n                @click=\"toggleFilter\"\r\n                id=\"filter_search\"\r\n              >\r\n                <i class=\"fas fa-filter\"></i>\r\n              </a> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"filter\" class=\"card filter-card\">\r\n          <div class=\"card-body pb-0\">\r\n            <div class=\"row\">\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Date</label>\r\n                  <input type=\"text\" class=\"form-control\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Status</label>\r\n                  <vue-select :options=\"paymentfilter\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Type</label>\r\n                  <vue-select :options=\"paymentfilter\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Method</label>\r\n                  <vue-select :options=\"paymentfilter\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-sm-12\">\r\n            <div class=\"card card-table\">\r\n              <div class=\"card-body\">\r\n                <div class=\"table-responsive\">\r\n                  <div\r\n                    class=\"d-flex align-items-center justify-content-between p-4\"\r\n                  >\r\n                    <div>\r\n                      <span>Show</span>\r\n                      <select class=\"mx-1 py-1\" v-model=\"perPage\" name=\"\" id=\"\">\r\n                        <option value=\"50\">50</option>\r\n                        <option value=\"100\">100</option>\r\n                        <option value=\"200\">200</option>\r\n                        <option value=\"500\">500</option>\r\n                      </select>\r\n                      <span>notifications</span>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"search\"\r\n                        placeholder=\"Search\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <table class=\"table table-center table-hover datatable\">\r\n                    <thead class=\"thead-light\">\r\n                      <tr>\r\n                        <th>User</th>\r\n                        <th>Title</th>\r\n                        <th>Date Created</th>\r\n                        <th>Status</th>\r\n                        <th class=\"text-end\">Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"item in notifications.data\" :key=\"item.id\">\r\n                        <td>\r\n                          <a href=\"javascript:void(0);\">{{\r\n                            item.recipients\r\n                          }}</a>\r\n                        </td>\r\n                        <td>{{ item.subject.slice(0, 20) }}</td>\r\n                        <td>{{ formatted(item.created_at) }}</td>\r\n                        <td>\r\n                          <span\r\n                            class=\"badge badge-pill bg-success-light\"\r\n                            v-if=\"item.status == 'success'\"\r\n                            >Successful</span\r\n                          >\r\n                          <span\r\n                            class=\"badge badeg-pill bg-warning\"\r\n                            v-if=\"item.status == 'queued'\"\r\n                            >Queued</span\r\n                          >\r\n                          <span\r\n                            class=\"badge badeg-pill bg-warning\"\r\n                            v-if=\"item.status == 'sending'\"\r\n                            >Sending</span\r\n                          >\r\n                          <span\r\n                            class=\"badge bg-danger\"\r\n                            v-if=\"item.status == 'failed'\"\r\n                            >Failed</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"text-center\">\r\n                          <div class=\"dropdown dropdown-action\">\r\n                            <a\r\n                              href=\"javascript:void(0)\"\r\n                              class=\"action-icon dropdown-toggle\"\r\n                              data-bs-toggle=\"dropdown\"\r\n                              aria-expanded=\"false\"\r\n                              ><i class=\"fas fa-ellipsis-h\"></i\r\n                            ></a>\r\n                            <div\r\n                              class=\"dropdown-menu dropdown-menu-right\"\r\n                              style=\"width: fit-content\"\r\n                            >\r\n                              <a\r\n                                class=\"dropdown-item\"\r\n                                href=\"javascript:void(0);\"\r\n                                @click=\"resendNotification(item.id)\"\r\n                                ><i class=\"fa fa-undo me-2\"></i> Resend</a\r\n                              >\r\n                              <a\r\n                                class=\"dropdown-item\"\r\n                                href=\"javascript:void(0);\"\r\n                                @click=\"openModal(item)\"\r\n                                ><i class=\"fa fa-trash me-2\"></i>Delete</a\r\n                              >\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  <div\r\n                    v-if=\"isFetching\"\r\n                    class=\"d-flex my-5 align-items-center justify-content-center\"\r\n                  >\r\n                    Loading...\r\n                  </div>\r\n                  <div\r\n                    v-if=\"length === 0\"\r\n                    class=\"d-flex my-5 align-items-center justify-content-center\"\r\n                  >\r\n                    No Data Available\r\n                  </div>\r\n                  <div\r\n                    v-if=\"!isFetching && length !== 0\"\r\n                    class=\"d-flex align-items-center justify-content-between p-4\"\r\n                  >\r\n                    <p v-if=\"notifications.meta\">\r\n                      Showing {{ notifications.data.length }} of\r\n                      {{ notifications.meta.total }} transactions\r\n                    </p>\r\n                    <div>\r\n                      <ul class=\"pagination mb-4\">\r\n                        <li\r\n                          class=\"page-item\"\r\n                          @click=\"previousPage\"\r\n                          :class=\"{ disabled: currentPage == 1 }\"\r\n                        >\r\n                          <a class=\"page-link\" href=\"javascript:;\" tabindex=\"-1\"\r\n                            >Previous</a\r\n                          >\r\n                        </li>\r\n                        <li\r\n                          class=\"page-item\"\r\n                          v-for=\"pageNumber in pageNumbers\"\r\n                          :key=\"pageNumber\"\r\n                          @click=\"setPage(pageNumber)\"\r\n                          :class=\"{\r\n                            active: pageNumber === currentPage,\r\n                          }\"\r\n                        >\r\n                          <a class=\"page-link\" href=\"javascript:;\">{{\r\n                            pageNumber\r\n                          }}</a>\r\n                        </li>\r\n                        <li class=\"page-item\" @click=\"nextPage\">\r\n                          <a class=\"page-link\" href=\"javascript:;\">Next</a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- /Page Wrapper -->\r\n    <div\r\n      id=\"top-modal\"\r\n      class=\"modal fade\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div class=\"modal-dialog modal-top\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h4 class=\"modal-title\" id=\"topModalLabel\">Delete Role</h4>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn-close\"\r\n              data-bs-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            ></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <!-- <h5>Text in a modal</h5> -->\r\n            <p>\r\n              Are you sure you want to delete\r\n              <span v-if=\"selectedItem\"\r\n                >{{ selectedItem.subject.slice(0, 20) }}?</span\r\n              >\r\n            </p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-light me-1\"\r\n              @click=\"closeModal\"\r\n            >\r\n              Close\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              @click=\"deleteNotification\"\r\n              class=\"btn btn-danger\"\r\n            >\r\n              Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <!-- /.modal-content -->\r\n      </div>\r\n    </div>\r\n    <!-- /.modal-dialog -->\r\n  </div>\r\n  <!-- /Main Wrapper -->\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { formatted } from \"../../assets/composables/date\";\r\n\r\nconst store = useStore();\r\nconst filter = ref(false);\r\nconst currentPage = ref(1);\r\nconst perPage = ref(50);\r\nconst search = ref(\"\");\r\nconst selectedItem = ref(null);\r\nconst isFetching = ref(false);\r\nconst length = ref(null);\r\n\r\nwatch(search, (newValue) => {\r\n  Search(newValue);\r\n});\r\n\r\nconst Search = (keyword) => {\r\n  let data = {\r\n    page: currentPage.value,\r\n    per_page: perPage.value,\r\n    query: keyword,\r\n  };\r\n  store.dispatch(\"notification/getNotifications\", data);\r\n};\r\n\r\nconst toggleFilter = () => {\r\n  filter.value = !filter.value;\r\n};\r\n\r\nconst openModal = (item) => {\r\n  var myModal = new bootstrap.Modal(document.getElementById(\"top-modal\"), {\r\n    backdrop: \"static\",\r\n  });\r\n  myModal.show();\r\n\r\n  selectedItem.value = item;\r\n};\r\nconst closeModal = () => {\r\n  var myModal = document.getElementById(\"top-modal\");\r\n  var modalTrigger = document.querySelector('[data-bs-dismiss=\"modal\"]');\r\n  modalTrigger.setAttribute(\"data-bs-target\", \"#\" + myModal.id);\r\n  modalTrigger.click();\r\n};\r\n\r\nconst resendNotification = (id) => {\r\n  store.dispatch(\"notification/resendNotification\", id);\r\n};\r\n\r\nconst deleteNotification = () => {\r\n  store.dispatch(\"notification/deleteNotification\", selectedItem.value.id);\r\n  closeModal();\r\n};\r\n\r\nwatch(perPage, (newValue) => {\r\n  perPage.value = newValue;\r\n  getNotifications();\r\n});\r\n\r\nconst paymentfilter = [\"Payment Mode\", \"Cash\", \"Cheque\", \"Card\", \"Online\"];\r\n\r\nconst notifications = computed(() => {\r\n  return store.getters[\"notification/notifications\"];\r\n});\r\n\r\nconst getNotifications = () => {\r\n  isFetching.value = true;\r\n  let data = {\r\n    page: currentPage.value,\r\n    per_page: perPage.value,\r\n    query: \"\",\r\n  };\r\n  store\r\n    .dispatch(\"notification/getNotifications\", data)\r\n    .then(() => {\r\n      isFetching.value = false;\r\n      length.value = notifications.value.data.length;\r\n    })\r\n    .catch(() => {\r\n      isFetching.value = false;\r\n    });\r\n};\r\n\r\n// Pagination start\r\nconst total = computed(() => {\r\n  return store.getters[\"notification/total\"];\r\n});\r\n\r\nconst setPage = (pageNumber) => {\r\n  currentPage.value = pageNumber;\r\n  getNotifications();\r\n};\r\n\r\nconst nextPage = () => {\r\n  if (pageNumbers.length > 1) {\r\n    currentPage.value++;\r\n    getNotifications();\r\n  }\r\n};\r\n\r\nconst previousPage = () => {\r\n  if (currentPage.value != 1) {\r\n    currentPage.value--;\r\n    getNotifications();\r\n  }\r\n};\r\n\r\nconst pageNumbers = computed(() => {\r\n  const pageNumbers = [];\r\n  for (let i = 1; i <= total.value; i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n  if (pageNumbers.length > 10) {\r\n    return pageNumbers.splice(0, 10);\r\n  } else {\r\n    return pageNumbers;\r\n  }\r\n});\r\n// Pagination End\r\n\r\nonMounted(() => {\r\n  getNotifications();\r\n});\r\n</script>\r\n"],"sourceRoot":""}