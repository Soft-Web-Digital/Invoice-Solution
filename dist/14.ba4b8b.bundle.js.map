{"version":3,"sources":["webpack:///./views/pages/user/tabs/UserEstimates.vue?c502","webpack:///./views/pages/user/tabs/UserEstimates.vue"],"names":["__exports__","store","route","currentPage","perPage","search","isFetching","length","newValue","getEstimates","value","estimates","getters","keyword","data","id","params","page","per_page","query","dispatch","then","catch","total","nextPage","pageNumbers","previousPage","i","push","splice","pageNumber"],"mappings":"s1DAGA,MAAMA,E,iCCgJL,MAAMC,EAAQ,cACRC,EAAQ,cACRC,EAAc,YAAI,GAClBC,EAAU,YAAI,IACdC,EAAS,YAAI,IACbC,EAAa,aAAI,GACjBC,EAAS,YAAI,MAEnB,gBAAMF,EAASG,IACdC,EAAaD,KAGd,gBAAMJ,EAAUI,IACfJ,EAAQM,MAAQF,EAChBC,MAGD,MAAME,EAAY,mBAAS,IACnBV,EAAMW,QAAQ,wBAGhBH,EAAe,CAACI,EAAU,MAC/BP,EAAWI,OAAQ,EACnB,IAAII,EAAO,CACVC,GAAIb,EAAMc,OAAOD,GACjBE,KAAMd,EAAYO,MAClBQ,SAAUd,EAAQM,MAClBS,MAAON,GAERZ,EACEmB,SAAS,yBAA0BN,GACnCO,KAAK,KACLf,EAAWI,OAAQ,EACnBH,EAAOG,MAAQC,EAAUD,MAAMI,KAAKP,SAEpCe,MAAM,KACNhB,EAAWI,OAAQ,KAKhBa,EAAQ,mBAAS,IACftB,EAAMW,QAAQ,gBAQhBY,EAAW,KACZC,EAAYlB,OAAS,IACxBJ,EAAYO,QACZD,MAIIiB,EAAe,KACK,GAArBvB,EAAYO,QACfP,EAAYO,QACZD,MAIIgB,EAAc,mBAAS,KAC5B,MAAMA,EAAc,GACpB,IAAK,IAAIE,EAAI,EAAGA,GAAKJ,EAAMb,MAAOiB,IACjCF,EAAYG,KAAKD,GAElB,OAAIF,EAAYlB,OAAS,GACjBkB,EAAYI,OAAO,EAAG,IAEtBJ,I,OAKT,oBAAU,KACThB,M,0wGAjCe,CAACqB,IAChB3B,EAAYO,MAAQoB,EACpBrB,K,yOD7La","file":"14.ba4b8b.bundle.js","sourcesContent":["import script from \"./UserEstimates.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserEstimates.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n\t<div class=\"table-responsive mt-0\">\r\n\t\t<div class=\"d-flex align-items-center justify-content-between py-4\">\r\n\t\t\t<div>\r\n\t\t\t\t<span>Show</span>\r\n\t\t\t\t<select class=\"mx-1 py-1\" v-model=\"perPage\" name=\"\" id=\"\">\r\n\t\t\t\t\t<option value=\"50\">50</option>\r\n\t\t\t\t\t<option value=\"100\">100</option>\r\n\t\t\t\t\t<option value=\"200\">200</option>\r\n\t\t\t\t\t<option value=\"500\">500</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<span>estimates</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<input\r\n\t\t\t\t\tv-model=\"search\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\tplaceholder=\"Search\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<table class=\"table table-stripped table-center table-hover datatable\">\r\n\t\t\t<thead class=\"thead-light\">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>#</th>\r\n\t\t\t\t\t<th>Estimate ID</th>\r\n\t\t\t\t\t<th>Customer</th>\r\n\t\t\t\t\t<th>Amount</th>\r\n\t\t\t\t\t<th>Date Created</th>\r\n\t\t\t\t\t<th>Due Date</th>\r\n\t\t\t\t\t<th>Status</th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody v-if=\"estimates.data && estimates.data.length > 0\">\r\n\t\t\t\t<tr v-for=\"(estimate, index) in estimates.data\" :key=\"estimate.id\">\r\n\t\t\t\t\t<td>{{ index + 1 }}</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{{ estimate.estimate_id }}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>{{ estimate.customer.name }}</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{{ `${estimate.currency} ${estimate.total_amount.toFixed(2)}` }}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>{{ formatted(estimate.created_at) }}</td>\r\n\t\t\t\t\t<td>{{ formatted(estimate.due_date) }}</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"badge badge-pill text-capitalize bg-success-light\"\r\n\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\testimate.status === 'paid' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'sent' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'viewed' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'accepted'\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t>{{ estimate.status }}</span\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"badge badge-pill text-capitalize bg-warning-light\"\r\n\t\t\t\t\t\t\tv-else-if=\"\r\n\t\t\t\t\t\t\t\testimate.status === 'draft' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'pending' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'unpaid' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'recurring' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'partially_paid'\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t>{{\r\n\t\t\t\t\t\t\t\testimate.status === \"partially_paid\"\r\n\t\t\t\t\t\t\t\t\t? \"Partially paid\"\r\n\t\t\t\t\t\t\t\t\t: estimate.status\r\n\t\t\t\t\t\t\t}}</span\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"badge badge-pill text-capitalize bg-danger-light\"\r\n\t\t\t\t\t\t\tv-else-if=\"\r\n\t\t\t\t\t\t\t\testimate.status === 'expired' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'rejected' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'refunded' ||\r\n\t\t\t\t\t\t\t\testimate.status === 'overdue'\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t>{{ estimate.status }}</span\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t\t<div\r\n\t\t\tv-if=\"isFetching\"\r\n\t\t\tclass=\"d-flex my-5 align-items-center justify-content-center\"\r\n\t\t>\r\n\t\t\tLoading...\r\n\t\t</div>\r\n\t\t<div\r\n\t\t\tv-if=\"length === 0\"\r\n\t\t\tclass=\"d-flex my-5 align-items-center justify-content-center\"\r\n\t\t>\r\n\t\t\tNo Data Available\r\n\t\t</div>\r\n\t\t<div\r\n\t\t\tv-if=\"!isFetching && length !== 0\"\r\n\t\t\tclass=\"d-flex align-items-center justify-content-between p-4\"\r\n\t\t>\r\n\t\t\t<p v-if=\"estimates.meta\">\r\n\t\t\t\tShowing {{ estimates.data.length }} of\r\n\t\t\t\t{{ estimates.meta.total }} estimates\r\n\t\t\t</p>\r\n\t\t\t<div>\r\n\t\t\t\t<ul class=\"pagination mb-4\">\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tclass=\"page-item\"\r\n\t\t\t\t\t\t@click=\"previousPage\"\r\n\t\t\t\t\t\t:class=\"{ disabled: currentPage == 1 }\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<a class=\"page-link\" href=\"javascript:;\" tabindex=\"-1\">Previous</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tclass=\"page-item\"\r\n\t\t\t\t\t\tv-for=\"pageNumber in pageNumbers\"\r\n\t\t\t\t\t\t:key=\"pageNumber\"\r\n\t\t\t\t\t\t@click=\"setPage(pageNumber)\"\r\n\t\t\t\t\t\t:class=\"{\r\n\t\t\t\t\t\t\tactive: pageNumber === currentPage,\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<a class=\"page-link\" href=\"javascript:;\">{{ pageNumber }}</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tclass=\"page-item\"\r\n\t\t\t\t\t\t@click=\"nextPage\"\r\n\t\t\t\t\t\t:class=\"{ disabled: pageNumbers.length <= 1 }\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<a class=\"page-link\" href=\"javascript:;\">Next</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, computed, watch } from \"vue\";\r\n\timport { useStore } from \"vuex\";\r\n\timport { useRoute } from \"vue-router\";\r\n\timport { formatted } from \"../../../../assets/composables/date\";\r\n\timport { useCurrency } from \"../../../../assets/composables/currency\";\r\n\r\n\tconst store = useStore();\r\n\tconst route = useRoute();\r\n\tconst currentPage = ref(1);\r\n\tconst perPage = ref(50);\r\n\tconst search = ref(\"\");\r\n\tconst isFetching = ref(false);\r\n\tconst length = ref(null);\r\n\r\n\twatch(search, (newValue) => {\r\n\t\tgetEstimates(newValue);\r\n\t});\r\n\r\n\twatch(perPage, (newValue) => {\r\n\t\tperPage.value = newValue;\r\n\t\tgetEstimates();\r\n\t});\r\n\r\n\tconst estimates = computed(() => {\r\n\t\treturn store.getters[\"users/userestimates\"];\r\n\t});\r\n\r\n\tconst getEstimates = (keyword = \"\") => {\r\n\t\tisFetching.value = true;\r\n\t\tlet data = {\r\n\t\t\tid: route.params.id,\r\n\t\t\tpage: currentPage.value,\r\n\t\t\tper_page: perPage.value,\r\n\t\t\tquery: keyword,\r\n\t\t};\r\n\t\tstore\r\n\t\t\t.dispatch(\"users/getUserEstimates\", data)\r\n\t\t\t.then(() => {\r\n\t\t\t\tisFetching.value = false;\r\n\t\t\t\tlength.value = estimates.value.data.length;\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tisFetching.value = false;\r\n\t\t\t});\r\n\t};\r\n\r\n\t// Pagination start\r\n\tconst total = computed(() => {\r\n\t\treturn store.getters[\"users/total\"];\r\n\t});\r\n\r\n\tconst setPage = (pageNumber) => {\r\n\t\tcurrentPage.value = pageNumber;\r\n\t\tgetEstimates();\r\n\t};\r\n\r\n\tconst nextPage = () => {\r\n\t\tif (pageNumbers.length > 1) {\r\n\t\t\tcurrentPage.value++;\r\n\t\t\tgetEstimates();\r\n\t\t}\r\n\t};\r\n\r\n\tconst previousPage = () => {\r\n\t\tif (currentPage.value != 1) {\r\n\t\t\tcurrentPage.value--;\r\n\t\t\tgetEstimates();\r\n\t\t}\r\n\t};\r\n\r\n\tconst pageNumbers = computed(() => {\r\n\t\tconst pageNumbers = [];\r\n\t\tfor (let i = 1; i <= total.value; i++) {\r\n\t\t\tpageNumbers.push(i);\r\n\t\t}\r\n\t\tif (pageNumbers.length > 10) {\r\n\t\t\treturn pageNumbers.splice(0, 10);\r\n\t\t} else {\r\n\t\t\treturn pageNumbers;\r\n\t\t}\r\n\t});\r\n\t// Pagination End\r\n\r\n\tonMounted(() => {\r\n\t\tgetEstimates();\r\n\t});\r\n</script>\r\n"],"sourceRoot":""}