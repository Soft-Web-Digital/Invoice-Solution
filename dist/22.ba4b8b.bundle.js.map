{"version":3,"sources":["webpack:///./views/roles-and-permissions/edit-role/EditRole.vue?766e","webpack:///./views/roles-and-permissions/edit-role/EditRole.vue"],"names":["__exports__","store","route","isLoading","form","name","permissions","editRole","value","data","id","params","payload","dispatch","then","catch","role","getters","selected_permission","permission","includes","map"],"mappings":"4oDAGA,MAAMA,E,4BC0IN,MAAMC,EAAQ,cACRC,EAAQ,cACRC,EAAY,aAAI,GAEhBC,EAAO,YAAI,CACfC,KAAM,GACNC,YAAa,KAGTC,EAAW,KACfJ,EAAUK,OAAQ,EAClB,IAAIC,EAAO,CACTC,GAAIR,EAAMS,OAAOD,GACjBE,QAASR,EAAKI,OAEhBP,EACGY,SAAS,iBAAkBJ,GAC3BK,KAAK,KACJX,EAAUK,OAAQ,IAEnBO,MAAM,KACLZ,EAAUK,OAAQ,KAIlBQ,EAAO,mBAAS,IACbf,EAAMgB,QAAQ,eAEjBC,EAAsBC,IAC1Bf,EAAKI,MAAMF,YAAYc,SAASD,IAW5Bb,EAAc,mBAAS,IACpBL,EAAMgB,QAAQ,sB,OAOvB,oBAAU,KAhBRhB,EAAMY,SAAS,iBAAkBX,EAAMS,OAAOD,IAAII,KAAK,KACrDV,EAAKI,MAAMH,KAAOW,EAAKR,MAAMH,KAC7BD,EAAKI,MAAMF,YAAcU,EAAKR,MAAMF,YAAYe,IAAIF,GAClDA,EAAWT,MAefT,EAAMY,SAAS,0B,g/GD1LF","file":"22.ba4b8b.bundle.js","sourcesContent":["import script from \"./EditRole.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditRole.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <!-- Main Wrapper -->\r\n  <div class=\"main-wrapper\">\r\n    <layout-header></layout-header>\r\n    <layout-sidebar></layout-sidebar>\r\n\r\n    <!-- Notification -->\r\n    <div\r\n      v-if=\"store.state.roles.error\"\r\n      style=\"\r\n        width: fit-content;\r\n        position: fixed;\r\n        right: 10px;\r\n        top: 5px;\r\n        z-index: 9999;\r\n      \"\r\n      class=\"alert alert-danger alert-dismissible fade show pb-2 text-sm\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.roles.error }}</p>\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn-close\"\r\n        data-bs-dismiss=\"alert\"\r\n        aria-label=\"Close\"\r\n      ></button>\r\n    </div>\r\n    <div\r\n      v-if=\"store.state.roles.message\"\r\n      style=\"\r\n        width: fit-content;\r\n        position: fixed;\r\n        right: 10px;\r\n        top: 5px;\r\n        z-index: 9999;\r\n      \"\r\n      class=\"alert alert-success alert-dismissible fade show pb-2 text-sm\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.roles.message }}</p>\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn-close\"\r\n        data-bs-dismiss=\"alert\"\r\n        aria-label=\"Close\"\r\n      ></button>\r\n    </div>\r\n    <!-- Notification end -->\r\n\r\n    <!-- Page Wrapper -->\r\n    <div class=\"page-wrapper\">\r\n      <div class=\"content container-fluid\">\r\n        <div class=\"page-header\">\r\n          <div class=\"row\">\r\n            <div class=\"col-sm-12\">\r\n              <h3 class=\"page-title\">Expenses</h3>\r\n              <ul class=\"breadcrumb\">\r\n                <li class=\"breadcrumb-item\">\r\n                  <router-link to=\"/\">Dashboard</router-link>\r\n                </li>\r\n                <li class=\"breadcrumb-item\">\r\n                  <router-link to=\"/roles-and-permissions\"\r\n                    >Roles and Permissions</router-link\r\n                  >\r\n                </li>\r\n                <li class=\"breadcrumb-item active\">Edit Role</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-md-12\">\r\n            <div class=\"card\">\r\n              <div class=\"card-body\">\r\n                <form @submit.prevent=\"editRole\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-6\">\r\n                      <div class=\"form-group\">\r\n                        <label>Role Name</label>\r\n                        <input\r\n                          v-model=\"form.name\"\r\n                          placeholder=\"Super Admin\"\r\n                          type=\"text\"\r\n                          class=\"form-control\"\r\n                          required\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-md-6\">\r\n                      <div class=\"form-group\">\r\n                        <label>Permissions:</label>\r\n                        <div class=\"permission-container\">\r\n                          <div\r\n                            class=\"permission-list\"\r\n                            v-for=\"(permission, index) in permissions\"\r\n                            :key=\"index\"\r\n                          >\r\n                          <input type=\"checkbox\" :checked=\"selected_permission(permission)\" v-model=\"form.permissions\" :value=\"permission.id\"    />\r\n                            <span>{{ permission.name }}</span>\r\n                          </div>\r\n                        </div>\r\n                   \r\n                      </div>\r\n                      <div class=\"text-end mt-4\">\r\n                        <!-- <button type=\"submit\" class=\"btn btn-primary\">\r\n                          Add Role\r\n                        </button> -->\r\n                        <button\r\n                          class=\"btn btn-primary\"\r\n                          type=\"submit\"\r\n                          :disabled=\"isLoading\"\r\n                        >\r\n                          <span\r\n                            v-if=\"isLoading\"\r\n                            class=\"spinner-border spinner-border-sm me-1\"\r\n                            role=\"status\"\r\n                            aria-hidden=\"true\"\r\n                          ></span>\r\n                          <span v-if=\"!isLoading\">Edit Role</span>\r\n                          <span v-if=\"isLoading\">Updating...</span>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- /Page Wrapper -->\r\n  </div>\r\n  <!-- /Main Wrapper -->\r\n</template>\r\n<script setup>\r\nimport { computed, ref, onMounted } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRoute } from \"vue-router\";\r\n\r\nconst store = useStore();\r\nconst route = useRoute();\r\nconst isLoading = ref(false);\r\n\r\nconst form = ref({\r\n  name: \"\",\r\n  permissions: [],\r\n});\r\n\r\nconst editRole = () => {\r\n  isLoading.value = true;\r\n  let data = {\r\n    id: route.params.id,\r\n    payload: form.value,\r\n  };\r\n  store\r\n    .dispatch(\"roles/editRole\", data)\r\n    .then(() => {\r\n      isLoading.value = false;\r\n    })\r\n    .catch(() => {\r\n      isLoading.value = false;\r\n    });\r\n};\r\n\r\nconst role = computed(() => {\r\n  return store.getters[\"roles/role\"];\r\n});\r\nconst selected_permission =(permission)=>{\r\n  form.value.permissions.includes(permission)\r\n}\r\nconst getRole = () => {\r\n  store.dispatch(\"roles/showRole\", route.params.id).then(() => {\r\n    form.value.name = role.value.name;\r\n    form.value.permissions = role.value.permissions.map(permission=>\r\n      permission.id\r\n    )\r\n  });\r\n};\r\n\r\nconst permissions = computed(() => {\r\n  return store.getters[\"roles/permissions\"];\r\n});\r\n\r\n\r\n\r\n\r\n\r\nonMounted(() => {\r\n  getRole();\r\n  store.dispatch(\"roles/getPermissions\");\r\n});\r\n</script>"],"sourceRoot":""}