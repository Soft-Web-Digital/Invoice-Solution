{"version":3,"sources":["webpack:///./views/coupons/coupon/Coupons.vue?8e3c","webpack:///./views/coupons/coupon/Coupons.vue"],"names":["__exports__","store","filter","currentPage","perPage","search","selectedItem","isFetching","length","newValue","Search","keyword","data","page","value","per_page","query","dispatch","closeModal","myModal","document","getElementById","modalTrigger","querySelector","setAttribute","id","click","deleteCoupon","getRoles","paymentfilter","coupons","getters","getCoupons","then","catch","total","pageNumbers","i","push","splice","item","bootstrap","Modal","backdrop","show"],"mappings":"iiIAGA,MAAMA,G,2BCkPN,MAAMC,EAAQ,cACRC,EAAS,aAAI,GACbC,GAAc,YAAI,GAClBC,GAAU,YAAI,IACdC,GAAS,YAAI,IACbC,GAAe,YAAI,MACnBC,GAAa,aAAI,GACjBC,GAAS,YAAI,MAEnB,gBAAMH,GAASI,IACbC,GAAOD,KAGT,MAAMC,GAAUC,IACd,IAAIC,EAAO,CACTC,KAAMV,GAAYW,MAClBC,SAAUX,GAAQU,MAClBE,MAAOL,GAETV,EAAMgB,SAAS,oBAAqBL,IAehCM,GAAa,KACjB,IAAIC,EAAUC,SAASC,eAAe,aAClCC,EAAeF,SAASG,cAAc,6BAC1CD,EAAaE,aAAa,iBAAkB,IAAML,EAAQM,IAC1DH,EAAaI,SAGTC,GAAe,KACnB1B,EAAMgB,SAAS,sBAAuBX,GAAaQ,MAAMW,IACzDP,MAGF,gBAAMd,GAAUK,IACdL,GAAQU,MAAQL,EAChBmB,aAGF,MAAMC,GAAgB,CAAC,eAAgB,OAAQ,SAAU,OAAQ,UAE3DC,GAAU,mBAAS,IAChB7B,EAAM8B,QAAQ,mBAGjBC,GAAa,KACjBzB,GAAWO,OAAQ,EACnB,IAAIF,EAAO,CACTC,KAAMV,GAAYW,MAClBC,SAAUX,GAAQU,MAClBE,MAAO,IAETf,EACGgB,SAAS,oBAAqBL,GAC9BqB,KAAK,KACJ1B,GAAWO,OAAQ,EACnBN,GAAOM,MAAQgB,GAAQhB,MAAMF,KAAKJ,SAEnC0B,MAAM,KACL3B,GAAWO,OAAQ,KAKnBqB,GAAQ,mBAAS,IACdlC,EAAM8B,QAAQ,iBAsBH,mBAAS,KAC3B,MAAMK,EAAc,GACpB,IAAK,IAAIC,EAAI,EAAGA,GAAKF,GAAMrB,MAAOuB,IAChCD,EAAYE,KAAKD,GAEnB,OAAID,EAAY5B,OAAS,GAChB4B,EAAYG,OAAO,EAAG,IAEtBH,I,OAKX,oBAAU,KACRJ,O,y+HAvFgB,CAACQ,IACH,IAAIC,UAAUC,MAAMtB,SAASC,eAAe,aAAc,CACtEsB,SAAU,WAEJC,OAERtC,GAAaQ,MAAQ0B,G,gyCDhRR","file":"6.ba4b8b.bundle.js","sourcesContent":["import script from \"./Coupons.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Coupons.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <!-- Main Wrapper -->\r\n  <div class=\"main-wrapper\">\r\n    <layout-header></layout-header>\r\n    <layout-sidebar></layout-sidebar>\r\n\r\n    <!-- Notification -->\r\n    <div\r\n      v-if=\"store.state.coupon.error\"\r\n      class=\"alert notify-danger alert-dismissible\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.coupon.error }}</p>\r\n    </div>\r\n    <div\r\n      v-if=\"store.state.coupon.message\"\r\n      class=\"alert notify-success alert-dismissible\"\r\n      role=\"alert\"\r\n    >\r\n      <p>{{ store.state.coupon.message }}</p>\r\n    </div>\r\n    <!-- Notification end -->\r\n\r\n    <!-- Page Wrapper -->\r\n    <div class=\"page-wrapper\">\r\n      <div class=\"content container-fluid\">\r\n        <!-- Page Header -->\r\n        <div class=\"page-header\">\r\n          <div class=\"row align-items-center\">\r\n            <div class=\"col\">\r\n              <h3 class=\"page-title\">Coupons</h3>\r\n              <ul class=\"breadcrumb\">\r\n                <li class=\"breadcrumb-item\">\r\n                  <router-link to=\"/\">Dashboard</router-link>\r\n                </li>\r\n                <li class=\"breadcrumb-item active\">Coupons</li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"col-auto\">\r\n              <router-link to=\"/add-coupon\" class=\"btn btn-primary me-2\">\r\n                <i class=\"fas fa-plus\"></i>\r\n              </router-link>\r\n              <!-- <a\r\n                class=\"btn btn-primary filter-btn\"\r\n                href=\"javascript:void(0);\"\r\n                @click=\"toggleFilter\"\r\n                id=\"filter_search\"\r\n              >\r\n                <i class=\"fas fa-filter\"></i>\r\n              </a> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"filter\" class=\"card filter-card\">\r\n          <div class=\"card-body pb-0\">\r\n            <div class=\"row\">\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Date</label>\r\n                  <input type=\"text\" class=\"form-control\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Status</label>\r\n                  <vue-select :options=\"paymentfilter\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Type</label>\r\n                  <vue-select :options=\"paymentfilter\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-6 col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Method</label>\r\n                  <vue-select :options=\"paymentfilter\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-sm-12\">\r\n            <div class=\"card card-table\">\r\n              <div class=\"card-body\">\r\n                <div class=\"table-responsive\">\r\n                  <div\r\n                    class=\"d-flex align-items-center justify-content-between p-4\"\r\n                  >\r\n                    <div>\r\n                      <span>Show</span>\r\n                      <select class=\"mx-1 py-1\" v-model=\"perPage\" name=\"\" id=\"\">\r\n                        <option value=\"50\">50</option>\r\n                        <option value=\"100\">100</option>\r\n                        <option value=\"200\">200</option>\r\n                        <option value=\"500\">500</option>\r\n                      </select>\r\n                      <span>coupons</span>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        placeholder=\"Search\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <table class=\"table table-center table-hover datatable\">\r\n                    <thead class=\"thead-light\">\r\n                      <tr>\r\n                        <th>Code</th>\r\n                        <th>Discount</th>\r\n                        <th>Counts</th>\r\n                        <th>Date Added</th>\r\n                        <th>Due Date</th>\r\n                        <th>Status</th>\r\n                        <th class=\"text-end\">Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"item in coupons.data\" :key=\"item.id\">\r\n                        <td>\r\n                          <a href=\"javascript:void(0);\">{{ item.code }}</a>\r\n                        </td>\r\n                        <td>{{ item.discount + \"%\" }}</td>\r\n                        <td>{{ item.used }}</td>\r\n                        <td>{{ formatted(item.created_at) }}</td>\r\n                        <td>{{ formatted(item.expiry_date) }}</td>\r\n                        <td>\r\n                          <span class=\"badge badge-pill bg-success-light\"\r\n                            >Active</span\r\n                          >\r\n                          <!-- <span class=\"badge badeg-pill bg-warning\"\r\n                            >Warning</span\r\n                          >\r\n                          <span class=\"badge bg-danger\">Danger</span> -->\r\n                        </td>\r\n                        <td class=\"text-center\">\r\n                          <div class=\"dropdown dropdown-action\">\r\n                            <a\r\n                              href=\"javascript:void(0)\"\r\n                              class=\"action-icon dropdown-toggle\"\r\n                              data-bs-toggle=\"dropdown\"\r\n                              aria-expanded=\"false\"\r\n                              ><i class=\"fas fa-ellipsis-h\"></i\r\n                            ></a>\r\n                            <div\r\n                              class=\"dropdown-menu dropdown-menu-right\"\r\n                              style=\"width: fit-content\"\r\n                            >\r\n                              <router-link\r\n                                :to=\"'/edit-coupon/' + item.id\"\r\n                                class=\"dropdown-item\"\r\n                                ><i class=\"fa fa-edit me-2\"></i>\r\n                                Edit</router-link\r\n                              >\r\n                              <a\r\n                                class=\"dropdown-item\"\r\n                                href=\"javascript:void(0);\"\r\n                                @click=\"openModal(item)\"\r\n                                ><i class=\"fa fa-trash me-2\"></i>Delete</a\r\n                              >\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  <div\r\n                    v-if=\"isFetching\"\r\n                    class=\"d-flex my-5 align-items-center justify-content-center\"\r\n                  >\r\n                    Loading...\r\n                  </div>\r\n                  <div\r\n                    v-if=\"length === 0\"\r\n                    class=\"d-flex my-5 align-items-center justify-content-center\"\r\n                  >\r\n                    No Data Available\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- /Page Wrapper -->\r\n\r\n    <div\r\n      id=\"top-modal\"\r\n      class=\"modal fade\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div class=\"modal-dialog modal-top\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h4 class=\"modal-title\" id=\"topModalLabel\">Delete Role</h4>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn-close\"\r\n              data-bs-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            ></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <!-- <h5>Text in a modal</h5> -->\r\n            <p>\r\n              Are you sure you want to delete\r\n              <span v-if=\"selectedItem\">{{ selectedItem.code }}?</span>\r\n            </p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-light me-1\"\r\n              @click=\"closeModal\"\r\n            >\r\n              Close\r\n            </button>\r\n            <button type=\"button\" @click=\"deleteCoupon\" class=\"btn btn-danger\">\r\n              Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <!-- /.modal-content -->\r\n      </div>\r\n      <!-- /.modal-dialog -->\r\n    </div>\r\n  </div>\r\n  <!-- /Main Wrapper -->\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { formatted } from \"../../../assets/composables/date\";\r\n\r\nconst store = useStore();\r\nconst filter = ref(false);\r\nconst currentPage = ref(1);\r\nconst perPage = ref(50);\r\nconst search = ref(\"\");\r\nconst selectedItem = ref(null);\r\nconst isFetching = ref(false);\r\nconst length = ref(null);\r\n\r\nwatch(search, (newValue) => {\r\n  Search(newValue);\r\n});\r\n\r\nconst Search = (keyword) => {\r\n  let data = {\r\n    page: currentPage.value,\r\n    per_page: perPage.value,\r\n    query: keyword,\r\n  };\r\n  store.dispatch(\"coupon/getCoupons\", data);\r\n};\r\n\r\nconst toggleFilter = () => {\r\n  filter.value = !filter.value;\r\n};\r\n\r\nconst openModal = (item) => {\r\n  var myModal = new bootstrap.Modal(document.getElementById(\"top-modal\"), {\r\n    backdrop: \"static\",\r\n  });\r\n  myModal.show();\r\n\r\n  selectedItem.value = item;\r\n};\r\nconst closeModal = () => {\r\n  var myModal = document.getElementById(\"top-modal\");\r\n  var modalTrigger = document.querySelector('[data-bs-dismiss=\"modal\"]');\r\n  modalTrigger.setAttribute(\"data-bs-target\", \"#\" + myModal.id);\r\n  modalTrigger.click();\r\n};\r\n\r\nconst deleteCoupon = () => {\r\n  store.dispatch(\"coupon/deleteCoupon\", selectedItem.value.id);\r\n  closeModal();\r\n};\r\n\r\nwatch(perPage, (newValue) => {\r\n  perPage.value = newValue;\r\n  getRoles();\r\n});\r\n\r\nconst paymentfilter = [\"Payment Mode\", \"Cash\", \"Cheque\", \"Card\", \"Online\"];\r\n\r\nconst coupons = computed(() => {\r\n  return store.getters[\"coupon/coupons\"];\r\n});\r\n\r\nconst getCoupons = () => {\r\n  isFetching.value = true;\r\n  let data = {\r\n    page: currentPage.value,\r\n    per_page: perPage.value,\r\n    query: \"\",\r\n  };\r\n  store\r\n    .dispatch(\"coupon/getCoupons\", data)\r\n    .then(() => {\r\n      isFetching.value = false;\r\n      length.value = coupons.value.data.length;\r\n    })\r\n    .catch(() => {\r\n      isFetching.value = false;\r\n    });\r\n};\r\n\r\n// Pagination start\r\nconst total = computed(() => {\r\n  return store.getters[\"coupon/total\"];\r\n});\r\n\r\nconst setPage = (pageNumber) => {\r\n  currentPage.value = pageNumber;\r\n  getCoupons();\r\n};\r\n\r\nconst nextPage = () => {\r\n  if (pageNumbers.length > 1) {\r\n    currentPage.value++;\r\n    getCoupons();\r\n  }\r\n};\r\n\r\nconst previousPage = () => {\r\n  if (currentPage.value != 1) {\r\n    currentPage.value--;\r\n    getCoupons();\r\n  }\r\n};\r\n\r\nconst pageNumbers = computed(() => {\r\n  const pageNumbers = [];\r\n  for (let i = 1; i <= total.value; i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n  if (pageNumbers.length > 10) {\r\n    return pageNumbers.splice(0, 10);\r\n  } else {\r\n    return pageNumbers;\r\n  }\r\n});\r\n// Pagination End\r\n\r\nonMounted(() => {\r\n  getCoupons();\r\n});\r\n</script>\r\n"],"sourceRoot":""}