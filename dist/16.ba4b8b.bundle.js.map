{"version":3,"sources":["webpack:///./views/pages/user/tabs/UserInvoices.vue?26c7","webpack:///./views/pages/user/tabs/UserInvoices.vue"],"names":["__exports__","store","route","currentPage","perPage","search","isFetching","length","newValue","getInvoices","value","invoices","getters","keyword","data","id","params","page","per_page","query","dispatch","then","catch","total","nextPage","pageNumbers","previousPage","startPage","Math","max","floor","maxVisiblePages","endPage","min","pages","i","push","pageNumber"],"mappings":"4yEAGA,MAAMA,E,gCCiLN,MAAMC,EAAQ,cACRC,EAAQ,cACRC,EAAc,YAAI,GAClBC,EAAU,YAAI,IACdC,EAAS,YAAI,IACbC,EAAa,aAAI,GACjBC,EAAS,YAAI,MAEnB,gBAAMF,EAASG,IACbC,EAAYD,KAGd,gBAAMJ,EAAUI,IACdJ,EAAQM,MAAQF,EAChBC,MAGF,MAAME,EAAW,mBAAS,IACjBV,EAAMW,QAAQ,uBAGjBH,EAAc,CAACI,EAAU,MAC7BP,EAAWI,OAAQ,EACnB,IAAII,EAAO,CACTC,GAAIb,EAAMc,OAAOD,GACjBE,KAAMd,EAAYO,MAClBQ,SAAUd,EAAQM,MAClBS,MAAON,GAETZ,EACGmB,SAAS,wBAAyBN,GAClCO,KAAK,KACJf,EAAWI,OAAQ,EACnBH,EAAOG,MAAQC,EAASD,MAAMI,KAAKP,SAEpCe,MAAM,KACLhB,EAAWI,OAAQ,KAKnBa,EAAQ,mBAAS,IACdtB,EAAMW,QAAQ,gBAQjBY,EAAW,KACXC,EAAYlB,OAAS,IACvBJ,EAAYO,QACZD,MAIEiB,EAAe,KACM,GAArBvB,EAAYO,QACdP,EAAYO,QACZD,MAIEgB,EAAc,mBAAS,KAE3B,IAAIE,EAAYC,KAAKC,IACnB1B,EAAYO,MAAQkB,KAAKE,MAAMC,GAC/B,GAEF,MAAMC,EAAUJ,KAAKK,IAAIN,EALD,GAK+B,EAAGJ,EAAMb,OAE5DsB,EAAUL,EAAY,EAPF,KAQtBA,EAAYC,KAAKC,IAAIG,EARC,GAQ2B,EAAG,IAGtD,MAAME,EAAQ,GACd,IAAK,IAAIC,EAAIR,EAAWQ,GAAKH,EAASG,IACpCD,EAAME,KAAKD,GAGb,OAAOD,I,OAIT,oBAAU,KACRzB,M,0tHAzCc,CAAC4B,IACflC,EAAYO,MAAQ2B,EACpB5B,K,yOD9Na","file":"16.ba4b8b.bundle.js","sourcesContent":["import script from \"./UserInvoices.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserInvoices.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"table-responsive\">\r\n    <div class=\"d-flex align-items-center justify-content-between py-4\">\r\n      <div>\r\n        <span>Show</span>\r\n        <select class=\"mx-1 py-1\" v-model=\"perPage\" name=\"\" id=\"\">\r\n          <option value=\"50\">50</option>\r\n          <option value=\"100\">100</option>\r\n          <option value=\"200\">200</option>\r\n          <option value=\"500\">500</option>\r\n        </select>\r\n        <span>Invoices</span>\r\n      </div>\r\n\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"search\"\r\n          class=\"form-control\"\r\n          placeholder=\"Search\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <table class=\"table table-stripped table-center table-hover datatable\">\r\n      <thead class=\"thead-light\">\r\n        <tr>\r\n          <th>#</th>\r\n          <th>Invoice ID</th>\r\n          <th>Customer</th>\r\n          <th>Amount</th>\r\n          <th>Date Created</th>\r\n          <th>Due Date</th>\r\n          <th>Status</th>\r\n          <th class=\"text-end\">Action</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(invoice, index) in invoices.data\" :key=\"invoice.id\">\r\n          <td>{{ index + 1 }}</td>\r\n          <td>\r\n            <h2 class=\"table-avatar\">\r\n              <router-link\r\n                :to=\"{\r\n                  name: 'user-invoice-view',\r\n                  params: { user_id: invoice.user_id, id: invoice.id },\r\n                }\"\r\n              >\r\n                {{ invoice.invoice_id }}\r\n              </router-link>\r\n            </h2>\r\n          </td>\r\n          <td>{{ invoice.customer.name }}</td>\r\n          <td>\r\n            {{\r\n              `${invoice.currency} ${addCurrencyComma(invoice.total_amount)}`\r\n            }}\r\n          </td>\r\n          <td>{{ formatted(invoice.created_at) }}</td>\r\n          <td>{{ formatted(invoice.due_date) }}</td>\r\n          <td>\r\n            <span\r\n              class=\"badge badge-pill text-capitalize bg-success-light\"\r\n              v-if=\"\r\n                invoice.status === 'paid' ||\r\n                invoice.status === 'sent' ||\r\n                invoice.status === 'viewed' ||\r\n                invoice.status === 'accepted'\r\n              \"\r\n              >{{ invoice.status }}</span\r\n            >\r\n            <span\r\n              class=\"badge badge-pill text-capitalize bg-warning-light\"\r\n              v-else-if=\"\r\n                invoice.status === 'draft' ||\r\n                invoice.status === 'unpaid' ||\r\n                invoice.status === 'recurring' ||\r\n                invoice.status === 'partially_paid'\r\n              \"\r\n              >{{\r\n                invoice.status === \"partially_paid\"\r\n                  ? \"Partially paid\"\r\n                  : invoice.status\r\n              }}</span\r\n            >\r\n            <span\r\n              class=\"badge badge-pill text-capitalize bg-danger-light\"\r\n              v-else-if=\"\r\n                invoice.status === 'expired' ||\r\n                invoice.status === 'rejected' ||\r\n                invoice.status === 'refunded' ||\r\n                invoice.status === 'overdue'\r\n              \"\r\n              >{{ invoice.status }}</span\r\n            >\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div class=\"dropdown dropdown-action\">\r\n              <a\r\n                class=\"action-icon dropdown-toggle\"\r\n                data-bs-toggle=\"dropdown\"\r\n                aria-expanded=\"false\"\r\n                ><i class=\"fas fa-ellipsis-h\"></i\r\n              ></a>\r\n              <div\r\n                class=\"dropdown-menu dropdown-menu-right\"\r\n                style=\"width: fit-content\"\r\n              >\r\n                <router-link\r\n                  :to=\"{\r\n                    name: 'user-invoice-view',\r\n                    params: { user_id: invoice.user_id, id: invoice.id },\r\n                  }\"\r\n                  class=\"dropdown-item\"\r\n                  ><i class=\"fa fa-eye me-2\"></i> View\r\n                </router-link>\r\n              </div>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div\r\n      v-if=\"isFetching\"\r\n      class=\"d-flex my-5 align-items-center justify-content-center\"\r\n    >\r\n      Loading...\r\n    </div>\r\n    <div\r\n      v-if=\"length === 0\"\r\n      class=\"d-flex my-5 align-items-center justify-content-center\"\r\n    >\r\n      No Data Available\r\n    </div>\r\n    <div\r\n      v-if=\"!isFetching && length !== 0\"\r\n      class=\"d-flex align-items-center justify-content-between p-4\"\r\n    >\r\n      <p v-if=\"invoices.meta\">\r\n        Showing {{ invoices.data.length }} of {{ invoices.meta.total }} invoices\r\n      </p>\r\n      <div>\r\n        <ul class=\"pagination mb-4\">\r\n          <li\r\n            class=\"page-item\"\r\n            @click=\"previousPage\"\r\n            :class=\"{ disabled: currentPage == 1 }\"\r\n          >\r\n            <a class=\"page-link\" href=\"javascript:;\" tabindex=\"-1\">Previous</a>\r\n          </li>\r\n          <li\r\n            class=\"page-item\"\r\n            v-for=\"pageNumber in pageNumbers\"\r\n            :key=\"pageNumber\"\r\n            @click=\"setPage(pageNumber)\"\r\n            :class=\"{\r\n              active: pageNumber === currentPage,\r\n            }\"\r\n          >\r\n            <a class=\"page-link\" href=\"javascript:;\">{{ pageNumber }}</a>\r\n          </li>\r\n          <li\r\n            class=\"page-item\"\r\n            @click=\"nextPage\"\r\n            :class=\"{ disabled: pageNumbers.length <= 1 }\"\r\n          >\r\n            <a class=\"page-link\" href=\"javascript:;\">Next</a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { formatted } from \"../../../../assets/composables/date\";\r\nimport { addCurrencyComma } from \"../../../../assets/composables/currency\";\r\n\r\nconst store = useStore();\r\nconst route = useRoute();\r\nconst currentPage = ref(1);\r\nconst perPage = ref(50);\r\nconst search = ref(\"\");\r\nconst isFetching = ref(false);\r\nconst length = ref(null);\r\n\r\nwatch(search, (newValue) => {\r\n  getInvoices(newValue);\r\n});\r\n\r\nwatch(perPage, (newValue) => {\r\n  perPage.value = newValue;\r\n  getInvoices();\r\n});\r\n\r\nconst invoices = computed(() => {\r\n  return store.getters[\"users/userinvoices\"];\r\n});\r\n\r\nconst getInvoices = (keyword = \"\") => {\r\n  isFetching.value = true;\r\n  let data = {\r\n    id: route.params.id,\r\n    page: currentPage.value,\r\n    per_page: perPage.value,\r\n    query: keyword,\r\n  };\r\n  store\r\n    .dispatch(\"users/getUserInvoices\", data)\r\n    .then(() => {\r\n      isFetching.value = false;\r\n      length.value = invoices.value.data.length;\r\n    })\r\n    .catch(() => {\r\n      isFetching.value = false;\r\n    });\r\n};\r\n\r\n// Pagination start\r\nconst total = computed(() => {\r\n  return store.getters[\"users/total\"];\r\n});\r\n\r\nconst setPage = (pageNumber) => {\r\n  currentPage.value = pageNumber;\r\n  getInvoices();\r\n};\r\n\r\nconst nextPage = () => {\r\n  if (pageNumbers.length > 1) {\r\n    currentPage.value++;\r\n    getInvoices();\r\n  }\r\n};\r\n\r\nconst previousPage = () => {\r\n  if (currentPage.value != 1) {\r\n    currentPage.value--;\r\n    getInvoices();\r\n  }\r\n};\r\n\r\nconst pageNumbers = computed(() => {\r\n  const maxVisiblePages = 10;\r\n  let startPage = Math.max(\r\n    currentPage.value - Math.floor(maxVisiblePages / 2),\r\n    1\r\n  );\r\n  const endPage = Math.min(startPage + maxVisiblePages - 1, total.value);\r\n\r\n  if (endPage - startPage + 1 < maxVisiblePages) {\r\n    startPage = Math.max(endPage - maxVisiblePages + 1, 1);\r\n  }\r\n\r\n  const pages = [];\r\n  for (let i = startPage; i <= endPage; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  return pages;\r\n});\r\n// Pagination End\r\n\r\nonMounted(() => {\r\n  getInvoices();\r\n});\r\n</script>\r\n"],"sourceRoot":""}